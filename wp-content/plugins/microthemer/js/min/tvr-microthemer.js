window.TvrSharedVars={},window.TvrSharedVars.JSerrors=[],window.onerror=function(e,t,r){window.TvrSharedVars.JSerrors.push({error:e,URL:t,line:r,source:"Microthemer interface"})},function(e){e.fn.ruler=function(t){var r={vRuleSize:18,hRuleSize:18,showCrosshair:!1,showMousePos:!1},a=e.extend({},r,t),i='<div class="ruler ruler-stuff hRule"></div>',s='<div class="ruler ruler-stuff vRule"></div>',n='<div class="ruler ruler-stuff corner"></div>';return e(window).resize(function(t){var r=e(".hRule"),i=e(".vRule");r.empty(),i.empty().height(0).outerHeight(i.parent().outerHeight());for(var s=a.vRuleSize,n="";s<=r.width();)(s-a.vRuleSize)%50==0?(n="<div class='tickLabel'>"+(s-a.vRuleSize)+"</div>",e(n).css("left",s+"px").appendTo(r)):(s-a.vRuleSize)%10==0?(n="<div class='tickMajor'></div>",e(n).css("left",s+"px").appendTo(r)):(s-a.vRuleSize)%5==0&&(n="<div class='tickMinor'></div>",e(n).css("left",s+"px").appendTo(r)),s+=5;for(s=a.hRuleSize,n="";s<=i.height();)(s-a.hRuleSize)%50==0?(n="<div class='tickLabel'><span>"+(s-a.hRuleSize)+"</span></div>",e(n).css("top",s+"px").appendTo(i)):(s-a.hRuleSize)%10==0?(n="<div class='tickMajor'></div>",e(n).css("top",s+"px").appendTo(i)):(s-a.hRuleSize)%5==0&&(n="<div class='tickMinor'></div>",e(n).css("top",s+"px").appendTo(i)),s+=5}),this.each(function(){var t=e(this);if(a.hRuleSize>0&&e(i).height(a.hRuleSize).prependTo(t),a.vRuleSize>0){var r=t.outerWidth();t.outerWidth(r),e(s).width(a.vRuleSize).height(t.outerHeight()).prependTo(t)}a.vRuleSize>0&&a.hRuleSize>0&&e(n).css({width:a.vRuleSize,height:a.hRuleSize}).prependTo(t);for(var o=t.children(".hRule"),l=t.children(".vRule"),c=a.vRuleSize,d="";c<=o.width();)(c-a.vRuleSize)%50==0?(d="<div class='tickLabel'>"+(c-a.vRuleSize)+"</div>",e(d).css("left",c+"px").appendTo(o)):(c-a.vRuleSize)%10==0?(d="<div class='tickMajor'></div>",e(d).css("left",c+"px").appendTo(o)):(c-a.vRuleSize)%5==0&&(d="<div class='tickMinor'></div>",e(d).css("left",c+"px").appendTo(o)),c+=5;for(c=a.hRuleSize,d="";c<=l.height();)(c-a.hRuleSize)%50==0?(d="<div class='tickLabel'><span>"+(c-a.hRuleSize)+"</span></div>",e(d).css("top",c+"px").appendTo(l)):(c-a.hRuleSize)%10==0?(d="<div class='tickMajor'></div>",e(d).css("top",c+"px").appendTo(l)):(c-a.hRuleSize)%5==0&&(d="<div class='tickMinor'></div>",e(d).css("top",c+"px").appendTo(l)),c+=5})}}(jQuery),jQuery(document).ready(function(e){window.TvrSharedVars.adminUrl=e("#admin-url").attr("rel"),window.TvrSharedVars.microUrl=e("#micro-url").attr("rel"),window.TvrSharedVars.cssMin=e("#css-min").attr("rel"),window.TvrSharedVars.cssStub=e("#css-stub").attr("rel"),window.TvrSharedVars.totalSecs=parseInt(e("#total-sec-count").text()),window.TvrSharedVars.TvrSugCSS={},window.TvrSharedVars.highlightEnabled=!1,window.TvrSharedVars.tmpHighlighting=!1,window.TvrSharedVars.tmpHideHighlighting=!1,window.TvrSharedVars.colorPickerDragging=!1,window.TvrSharedVars.progStatus=[],window.TvrSharedVars.intelli=!1,window.TvrSharedVars.awaitingIFrame=!0,window.TvrSharedVars.show_interface=TvrPref.show_interface,window.TvrSharedVars.cssProps=TvrCSSProps,window.TvrSharedVars.compProps={},window.TvrSharedVars.intelliCompProps={},window.TvrSharedVars.nodeCSS={},window.TvrSharedVars.intellinodeCSS={},window.TvrSharedVars.mixedElKey=0,window.TvrSharedVars.g_url="",TvrEditors={};var t={startT:function(e,arguments){if(TVR_DEV_MODE){if(!e)var e=arguments?arguments.callee.name:"function";t.isDefined(r.profiler[e])||(r.profiler[e]={sT:[],eT:[],elT:[],calls:0,total_time:0}),r.profiler[e].sT[++r.profiler[e].calls]=(new Date).getTime()}},endT:function(e,a,arguments){if(TVR_DEV_MODE){if(!e)var e=arguments?arguments.callee.name:"function";var i=r.profiler[e].calls;r.profiler[e].eT[i]=(new Date).getTime();var s=r.profiler[e].eT[i]-r.profiler[e].sT[i];r.profiler[e].elT[i]=s,r.profiler[e].total_time=r.profiler[e].total_time+s,a&&t.showT(e)}},showT:function(e){if(TVR_DEV_MODE){var a="";if("all"!=e)a=t.msgT(e);else for(var e in r.profiler)a+=t.msgT(e);window.console&&window.console.log&&console.log(a)}},msgT:function(e){var a=r.profiler[e].calls;t.isDefined(r.profiler[e].eT[a])||t.endT(e);var i=r.profiler[e].total_time.toFixed(2),s=r.profiler[e].calls;return s+" calls	 "+(i/1e3).toFixed(2)+" seconds	 "+i+" ms	 avg: "+(i/s).toFixed(2)+"ms	 "+e+"\n"},hasValue:function(e){return!!e},isDefined:function(e){return""!==e&&"undefined"!==e&&void 0!==e&&null!==e},isDomEl:function(e){return!!(t.hasValue(e)&&e.prop&&e.prop("tagName"))},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},ltrim:function(e){return e.replace(/^\s+/,"")},rtrim:function(e){return e.replace(/\s+$/,"")},has_protocol:function(e){return e.match(/((?:[a-z]+:)?\/\/)/i)},domain_matches:function(e){return e.indexOf(r.siteUrl)>-1},extract_url_path:function(e){var r;if(t.domain_matches(e)||t.has_protocol(e)){var a=document.createElement("a");a.href=e,r=a.pathname}else r="/"+t.ltrim(e,"/");return r},ucwords:function(e){return 1!=TvrPref.auto_capitalize?e:(e+"").replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})},readable_name:function(e){return t.ucwords((e+"").replace(/[_-]/g," "))},maybe_to_hex:function(e){if(!t.hasValue(e))return e;if(e=e.toString(),e.indexOf("rgb")<0)return e;if(e.indexOf("rgba(0, 0, 0, 0)")>-1)return e.replace(/rgba\(0, 0, 0, 0\)/g,"transparent");var r="rgb",a=/(.*?)rgb\((\d+), (\d+), (\d+)\)/,i=/rgb\(.+[^\)]\)/g;e.indexOf("rgba")>-1&&(r="rgba",a=/(.*?)rgba\((\d+), (\d+), (\d+), (\d+(\.\d+)?)\)/,i=/rgba\(.+[^\)]\)/g);var s=e.split(r),n="";for(var o in s)if(s[o]&&t.hasValue(s[o])&&("string"==typeof s[o]||s[o]instanceof String)&&s[o].indexOf("function")<0)if(o>0){var l=r+s[o],c=a.exec(l),d=parseInt(c[2]),_=parseInt(c[3]),u=parseInt(c[4]),p=!1;if(t.hasValue(c[5])&&"rgba"==r&&(p=parseFloat(c[5]),t.hasValue(p)&&(p=p.toFixed(2))),1!=TvrPref.color_as_hex){var f=r+"("+d+", "+_+", "+u;return f+="rgba"==r?", "+p:"",f+=")"}var v="#"+((1<<24)+(d<<16)+(_<<8)+u).toString(16).slice(1);l=l.replace(i,v),p&&"rgba"==r&&(l+=" ("+p+" opacity)"),n+=l}else n+=s[o];return n},adjust_mqs_for_unit:function(e){var t=["min","max"];for(var a in e)for(var i=0;i<t.length;++i){var s=t[i];e[a][s]=parseFloat(e[a][s]),e[a][s+"_unit"]&&"px"!=e[a][s+"_unit"]&&(e[a][s]=parseFloat(e[a][s])*r.baseFontSize)}return e},pipes_to_array:function(e){for(var t=[],r=e.attr("rel").split("|"),a=r.length,i=0;a>i;++i){var s=r[i].split(",");t[s[0]]=parseInt(s[1])}return t},print_r:function(e,r){var a=r||"",i="[object Array]"===Object.prototype.toString.call(e),s=i?"Array\n"+a+"[\n":"Object\n"+a+"{\n";for(var n in e)if(e.hasOwnProperty(n)){var o=e[n],l="",c=Object.prototype.toString.call(o);switch(c){case"[object Array]":case"[object Object]":l=t.print_r(o,a+"	");break;case"[object String]":l="'"+o+"'";break;default:l=o}s+=a+"	"+n+" => "+l+",\n"}return s=s.substring(0,s.length-2)+"\n"+a,i?s+"]":s+"}"},extract_str:function(e,r){if("gradient"==e){var a=r.split("linear-");if(a[0].indexOf("gradient")>=0)var i=a[0];else if(a[1]&&a[1].indexOf("gradient")>=0)var i=a[1];else var i=""}if("bg-image"==e){var a=r.split("linear-");i=a[0].indexOf("url")<0?"none":t.basename(a[0]).replace(/\)?"/,"")}return i},get_all_matches:function(e,t,r){r||(r=0);for(var a,i=[];a=t.exec(e);)i.push(a[r]);return i},replace_all_matches:function(t,r,a){if(e.isArray(r)&&e.isArray(a))for(var i in r)t=t.replace(r[i],a[i]);else if(e.isArray(r)&&!e.isArray(a))for(var i in r)t=t.replace(r[i],a);else if(!e.isArray(r)&&e.isArray(a))for(var i in a)t=t.replace(r,a[i]);else t=t.replace(/current/g,a);return t},basename:function(e){return t.hasValue(e)?e.split(/[\\/]/).pop().replace(")",""):e},root_rel:function(e){return e.replace(r.siteUrl,"")},bind_input_labels:function(t){t.each(function(){var t=e(this);this.value=t.attr("data-ph-title"),t.addClass("text-label"),t.bind("focus",function(){this.value==t.attr("data-ph-title")&&(this.value="",t.removeClass("text-label"))}),t.bind("blur",function(){""==this.value&&(this.value=t.attr("data-ph-title"),t.addClass("text-label"))})})},new_name_checks:function(a,i){if("folder"==i)var s=e("#tvr-menu"),n=".section-name";else var s=r.meta.sectionM,n=".selector-name";if(t.duplicates(a,s,n)){switch(i){case"folder":alert(js_i18n_main.already_exists_folder);break;case"selector":alert(js_i18n_main.already_exists_selector);break;default:alert(sprintf(js_i18n_main.already_exists_misc,i))}return!1}if(""==a||"folder"==i&&a==js_i18n_main.new_folder){switch(i){case"folder":alert(js_i18n_main.enter_name_folder);break;case"selector":alert(js_i18n_main.enter_name_selector);break;default:alert(sprintf(js_i18n_main.enter_name_misc,i))}return!1}var o=[];return o.newNameHuman=a,o.newName=t.convert_to_param(a),o},duplicates:function(r,a,i,s){var n=!1;return a.find(i).find(".name-text").each(function(){return s&&e(this).closest(".selector-tag").attr("id")==s?!0:void(t.convert_to_param(e(this).text())==t.convert_to_param(r)&&(n=!0))}),n},resolve_unique_name:function(e,r,a,i,s){if(t.duplicates(e,r,a,s)){var n=1;do{if(e.match(i)){1==n&&(n=2);var o=e.replace(/Copy \d+/,i+" "+n)}else var o=e+" "+i+" "+n;++n}while(t.duplicates(o,r,a,s));return o}return e},convert_to_param:function(e){return e=e.replace(/[^a-zA-Z0-9 ]+/g,"").replace("/ {2,}/"," "),e=e.replace(/ /g,"_").toLowerCase()},refresh_sortable:function(){var a=e("#tvr-menu"),i=(a.find("li.section-tag"),a.find("ul.selector-sub"));t.startT("bind sortable menu"),a.sortable({cursor:"move",handle:".folder-icon.sortable-icon",helper:"clone",revert:200,update:function(a,i){var s=r.get_meta(i.item,"section"),n=s.sectionM.prev().attr("id");t.hasValue(n)?s.section.detach().insertAfter("#"+n.replace("strk","opts")):s.section.detach().prependTo("#tvr-options"),t.hasValue(r.selInFocusID)&&r.update_visual_controls(e("#"+r.selInFocusID)),r.user_action({items:["section"],val:r.title(s.sectionM.find("span.folder-icon")),M:s,icon:"move-icon lg-icon"}),r.ajax_save_settings()}}),i.sortable({connectWith:"ul.selector-sub",cursor:"move",handle:".selector-icon.sortable-icon",refresh:"",helper:"clone",revert:200,activate:function(t,r){var a=e(r.sender);a.css("min-height",a.height())},deactivate:function(t,r){e(r.sender).css("min-height",0)},receive:function(e,r){t.selector_received(e,r)},stop:function(a,i){var s=r.get_meta(i.item,"selector"),n=s.selectorM.prev().attr("id");t.hasValue(n)?s.selector.detach().insertAfter("#"+n.replace("strk","opts")):s.selector.detach().prependTo(s.section.find("ul.opts-selectors-sub")),t.hasValue(r.selInFocusID)&&r.update_visual_controls(e("#"+r.selInFocusID)),r.user_action({items:["selector"],val:r.title(s.selectorM.find("span.selector-icon")),M:s,pathTT:!0,icon:"move-icon lg-icon"}),r.ajax_save_settings()}}),t.endT("bind sortable menu")},selector_received:function(e,a){var i=r.get_meta(a.item,"selector");if(!r.load_selector(i,js_i18n_main.load_after_moving)){var s=r.get_meta(a.item.closest(".section-tag"),"section");r.update_count(i.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),r.update_count(s.sectionM.find(".selector-count-state"),"add",1,"selector","");var n=t.resolve_unique_name(i.selectorH,s.sectionM,".selector-name","Moved",i.selectorMID);r.dom_replacements("selector",i.selector.add(i.selectorM),i.sectionSlug,s.sectionSlug,s.sectionH,i.selectorSlug,t.convert_to_param(n),n,i.selectorM.find(".selector-css-textarea").val()),r.is_cur("sel",i.selectorID)&&r.update_global_vars(r.get_meta(i.selectorM,"selector"))}},custom_escape_quotes:function(e){var t=e.replace(/"/g,"cus-quot;").replace(/'/g,"cus-#039;");return t},escapeHTML:function(e){return t.hasValue()?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},custom_to_non_escaped:function(e){var t=e.replace(/cus-quot;/g,'"').replace(/cus-#039;/g,"'");return t},regular_escape_quotes:function(e){var t=e.replace(/"/g,"&quot;").replace(/'/g,"&#039;");return t},escape_backslashes:function(e,t){return t?e.replace(/%5C/g,"%26%2392%3B"):e.replace(/\\/g,"&#92;")},jquery_escape_quotes:function(e){var t=e.replace(/"/g,'\\"').replace(/'/g,"\\'");return t},jquery_escaped_to_non_escaped:function(e){var t=e.replace(/\\"/g,'"').replace(/\\'/g,"'");return t},custom_to_regular_escape:function(e){var t=e.replace(/cus-/g,"&");return t},sane_decimal:function(e){if(t.hasValue(e)&&("string"==typeof e||e instanceof String)&&-1!=e.indexOf("px")&&-1!=e.indexOf(".")&&e.indexOf("rgb")<0){var r=e.split("px");return parseFloat(r[0]).toFixed(0)+"px"}return e},replace_decimals:function(e,t){var r=/\d+(\.\d*)|\.\d+/;return e=e.replace(r,function(e,r,a,i){return parseFloat(e).toFixed(t)})},in_array:function(e,t){for(var r in t)if(t[r]==e)return r;return!1},isNumber:function(e){return e==parseFloat(e)},isOdd:function(e){return t.isNumber(e)&&Math.abs(e)%2==1},check_fake:function(e,t){if(!t)var t=e.prev();e.hasClass("fake-radio")&&e.closest(".fake-radio-parent").find('input[type="radio"]').prop("checked",!1).end().find(".fake-radio").removeClass("on"),t.prop("checked",!0),e.addClass("on")},uncheck_fake:function(e,t){if(!t)var t=e.prev();if(e.hasClass("fake-radio"))return!1;if(!t)var t=e.prev();t.prop("checked",!1),e.removeClass("on")},toggle_radio_checkbox:function(e){if(e.hasClass("toggle-checked-folders"))r.toggle_multi_checkboxes(e);else{var a=e.prev();a.is(":checked")?t.uncheck_fake(e,a):t.check_fake(e,a)}},toggleFullScreen:function(e){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),e.removeClass("on"),r.full_screen_mode=!1):(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),e.addClass("on"),r.full_screen_mode=!0)},full_screen_changed:function(){r.toolbar_adjusted()}},r={stat:{win:window,doc:document,body:e("body"),tvr:e("#tvr"),vis:e("#visual-view"),nav:e("#tvr-nav"),top:e("#v-top-controls"),code:e("#hand-css-area"),view:e("#display-css-code-dialog"),res:e("#responsive-bar"),slider:e("#v-mq-slider"),opts:e("#tvr-options"),front:e("#v-frontend-wrap"),wiz:e("#advanced-wizard"),tools:e("#v-left-controls-wrap"),iframe:e("#viframe"),dialogs:e("#dialogs")},hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:parseInt(e("html").css("font-size")),browser:e("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},profiler:[],progTimer:[],jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,leftMenu:!!e("#v-left-controls").hasClass("show"),placeholderFrame:!0,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:e("#ajaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,prev:!1,fullWidth:e("body").width(),resSliderWidth:0,tabsWidth:0,iframe_slider_set:!1,mqs:[],allDevicesWidth:t.hasValue(e("#all_devices_default_width").attr("rel"))?e("#all_devices_default_width").attr("rel").replace("px",""):e("body").width(),totalSels:parseInt(e("#total-sel-count").text()),trial:"1"!=e("#plugin-trial").attr("rel"),trialNotice:js_i18n_main.trial_notice,gFontTarget:Object(),startSel:!1,selsToLoad:0,totalToLoad:0,typingTimer:0,doneTypingInterval:1200,saveInProgress:!1,reSave:!1,siteUrl:e("#site-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:e("#tooltip_delay").attr("rel").toLowerCase(),edgeMode:e("#edge-mode").attr("rel"),expanded:function(a){if("main_menu"==a)var i=e("#tvr-main-menu");else if("quick_section"==a)var i=e("#sec-in-focus");else if("quick_selector"==a)var i=e("#sel-in-focus");else if("mq"==a){var s=e("#"+r.selInFocusID);if(!t.isDomEl(s))return!1;var i=s.find("span.add-mq")}return!!i.hasClass("on")},init:function(){t.startT("total init"),r.reset_global_vars(),t.startT("init min/max media"),r.mqs=t.adjust_mqs_for_unit(TvrMQsCombined),t.endT("init min/max media"),t.startT("init full screen events"),r.stat.doc.addEventListener("fullscreenchange",t.full_screen_changed),r.stat.doc.addEventListener("webkitfullscreenchange",t.full_screen_changed),r.stat.doc.addEventListener("mozfullscreenchange",t.full_screen_changed),r.stat.doc.addEventListener("MSFullscreenChange",t.full_screen_changed),t.endT("init full screen events"),t.startT("init mouseup event"),r.stat.tvr.on("mouseup.tvr",function(){if(r.aceClick){var t=r.aceClick.container.height()-r.aceClick.orig_height;0!=t&&(TvrEditors[r.aceClick.container.find("pre").attr("id")].resize(),e("#v-frontend-wrap").css("height",r.frameHeight-t),r.toolbar_adjusted()),r.aceClick=!1}}),t.endT("init mouseup event"),t.startT("init tooltips"),"native"!=r.tooltipDelay&&(r.stat.body.click(function(t){var a=e(t.target);(a.hasClass("ui-tooltip")||a.hasClass("ui-tooltip-content"))&&r.clean_tooltips()}),r.enable_tt()),t.endT("init tooltips"),t.startT("init autocomplete menu override");e.ui.autocomplete.prototype._renderMenu;e.ui.autocomplete.prototype._renderMenu=function(r,a){var i=this;e.each(a,function(e,t){i._renderItemData(r,t)}),e(r).find("li").each(function(r){var a=e(this);t.isDomEl(a.find("a"))||a.addClass("empty ui-menu-item")})},t.endT("init autocomplete menu override"),r.stat.tvr.on("focus","input.combobox, input.sp-input",function(){var a=e(this);if(a.hasClass("combobox")){t.startT("init combobox events");var i=TvrCombo[a.attr("rel")];i||(i=[]),a.autocomplete({source:i,delay:0,minLength:0,appendTo:a.closest(".input-wrap"),open:function(e,t){r.clean_tooltips(),a.next(".combo-arrow").addClass("on")},select:function(e,i){if(a.val(i.item.value),a.parent(".input-wrap").addClass("manual-val").find(".comp-style").addClass("hidden").end().find(".combo-arrow").removeClass("on"),a.hasClass("property-input")){r.get_meta(a,"property");if(a.hasClass("tvr-font-select")){var s=a.closest(".field-wrap").siblings(".tvr-font-custom");r.gFontTarget=s.find(".property-input"),"Google Font..."==i.item.value?r.show_google_fonts(s):r.hide_google_fonts(a,s)}else a.hasClass("img_display")&&(t.hasValue(i.item.value)?"none"==i.item.value&&r.update_bg_image(a,i.item.value):r.clear_bg_image(a)),r.maybe_sync_fields(a);r.ajax_save_settings("",a)}if("css_unit_set"==a.attr("id")){var n=a.val();a.closest("ul").find("input.custom_css_unit").val(n)}"custom_paths"==a.attr("rel")&&(a.autocomplete("close"),r.change_preview_url(a.siblings(".change-preview-url"))),a.blur()},search:function(e,t){a.addClass("adjusted-corner-radius")},close:function(e,t){a.removeClass("adjusted-corner-radius").next(".combo-arrow").removeClass("on")}}),t.endT("init combobox events")}(a.hasClass("property-input")||a.hasClass("sp-input"))&&r.bind_input_events(a)}),r.stat.tvr.on("mousedown","span.combo-arrow, div.css-code-wrap",function(){var t=e(this);t.hasClass("combo-arrow")?t.siblings(".ui-menu").is(":visible")&&(r.wasOpen=!0):t.hasClass("css-code-wrap")&&r.get_editor_height(t)}),t.startT("init disable chrome page save event"),e(r.stat.win).keypress(function(e){return 115==e.which&&e.ctrlKey||19==e.which?(e.preventDefault(),!1):!0}),t.endT("init disable chrome page save event"),t.startT("init custom save event"),e(r.stat.doc).keydown(function(a){if(83==a.which&&1==a.ctrlKey){r.ua_detected();var i;if(!e("#edit-css-code").hasClass("on")&&r.selInFocusID){var s="#ed-"+r.selInFocusID+"-code-custom_css-css-"+r.get_mq_focus();if(s+=".ace_focus",i=e(s),t.isDomEl(i))return r.ajax_save_settings("",i.prev("textarea")),a.preventDefault(),!1}var n={items:[js_i18n_main.settings_saved],val:js_i18n_main.keyboard_shortcut,icon:"save-interface lg-icon"},n={items:[js_i18n_main.settings_saved],val:js_i18n_main.keyboard_shortcut,icon:"save-interface lg-icon"};return e("#edit-css-code").hasClass("on")&&(i=r.stat.code.find("pre.ace_focus"),t.isDomEl(i)&&(n.items=[js_i18n_main.custom_code],n.val=r.editor_line(r.get_editor(i)))),r.user_action(n),r.ajax_save_settings(),a.preventDefault(),!1}return t.hasValue(e(a.target))&&e(a.target).attr("class")&&e(a.target).attr("class").indexOf("strictly-dropdown")>-1?(a.preventDefault(),!1):void 0}),t.endT("init custom save event"),t.startT("init bind inside labels"),t.bind_input_labels(e("#add-new-section").find("input").add(e("#wizard_folder"))),t.endT("init bind inside labels"),t.refresh_sortable(),t.startT("init custom scrollbars"),r.stat.tvr.find("div.scrollable-area").mCustomScrollbar({theme:"dark-3",live:!0,scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}}),t.endT("init custom scrollbars"),t.startT("init double-click related fields event"),r.stat.opts.dblclick(function(t){var a=e(t.target);a.hasClass("autofillable")&&(r.sync_fields(a,r.get_meta(a,"property")),r.dblclickToSync=!0,r.ajax_save_settings("save",a))}),t.endT("init double-click related fields event"),t.startT("init mouseenter event"),r.stat.body.delegate(".property-input, tr.mixed-val, .sug-sel, .ui-tooltip, .cur-sel-highlight, .highlight-preview, .mt-menu-icon.item-toggle-highlighting, li.mt-screen-preview","mouseenter",function(){var a=!1,i=!0,s=e(this),n=s.attr("class");if(!n)return!1;if(n.indexOf("ui-tooltip")>=0)r.clean_tooltips();else if(n.indexOf("property-input")>=0)r.adjust_comp_span(s,"hover");else if(n.indexOf("mt-screen-preview")>=0)r.set_screen_preview(s,"hover");else if(n.indexOf("mixed-val")>=0)window.TvrSharedVars.mixedElKey=s.attr("rel"),a="mixed-hover";else if(n.indexOf("cur-sel-highlight")>=0)a="reg";else if(n.indexOf("highlight-preview")>=0)window.TvrSharedVars.intelli_css=s.parent().prev().attr("title"),a="sel-preview";else if(n.indexOf("item-toggle-highlighting")>=0){if(t.hasValue(r.selInFocusID)){var o=r.get_meta(e("#"+r.selInFocusID),"selector");window.TvrSharedVars.intelli_css=o.selectorM.find("span.selector-name").attr("title"),a="sel-preview"}}else n.indexOf("sug-sel")>=0&&!s.parent().hasClass("in-focus")&&(t.startT("sug-sel hover"),window.TvrSharedVars.intelli_css=s.text(),e("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere"),a="intelli",i=!1,t.endT("sug-sel hover"));a&&(window.TvrSharedVars.highlightEnabled||(window.TvrSharedVars.tmpHighlighting=!0,r.toggle_highlighting()),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight(a,i))}),t.endT("init mouseenter event"),t.startT("init mouseleave event"),r.stat.tvr.delegate(".property-input, tr.mixed-val, .sug-sel, .cur-sel-highlight, .highlight-preview, .mt-menu-icon.item-toggle-highlighting, .sp-container, li.mt-screen-preview","mouseleave",function(){var a=e(this),i=a.attr("class");if(!i)return!1;if(i.indexOf("property-input")>=0)r.adjust_comp_span(a,"after");else if(i.indexOf("mt-screen-preview")>=0)r.unset_screen_preview(a,"hover");else if(i.indexOf("mixed-val")>=0||i.indexOf("cur-sel-highlight")>=0||i.indexOf("highlight-preview")>=0||i.indexOf("item-toggle-highlighting")>=0&&t.hasValue(r.selInFocusID))r.return_normal_highlighting();else if(i.indexOf("sug-sel")>=0&&!a.parent().hasClass("in-focus")){var s=e("#code-suggestions").find("li.in-focus");s.removeClass("hover-elsewhere"),window.TvrSharedVars.intelli_css=s.find("textarea").text(),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight("intelli")}}),t.endT("init mouseleave event"),t.startT("init MQs sortable"),e("#mq-list").sortable(),t.endT("init MQs sortable"),t.startT("init MQs validation check"),e("#edit-media-queries-form").submit(function(){var t=!1;return e("#mq-list").find("input.m-label, textarea.m-code").each(function(){return 0==e(this).val().length?(e(this).focus(),t=!0,!1):void 0}),t?(alert(js_i18n_main.complete_media_fields),!1):void 0}),t.endT("init MQs validation check"),r.load_visual_view(e("#load-visual")),$visCon=e("#tvr"),$visCon.click(function(a){var i=e(a.target);try{if(s=i.attr("class"),!s)var s="tvr-undefined"}catch(n){}if(r.close_all_expanded(i,s),r.ua_detected(),s.indexOf("no-click")>=0)return!1;if(s.indexOf("fake-checkbox")>=0||s.indexOf("fake-radio")>=0)t.toggle_radio_checkbox(i);else if("email-error"==i.attr("id"))r.email_error_report();else if(s.indexOf("property-input")>=0)r.clean_tooltips();else if(s.indexOf("combo-arrow")>=0)r.combo_arrow_clicked(i);else if(s.indexOf("dismiss-status")>=0)r.clear_messages();else if(s.indexOf("main-menu-tip-trigger")>=0){var o=e("#tvr-main-menu");o.hasClass("on")?r.hide_main_menu():r.show_main_menu(o)}else if(s.indexOf("sec-in-focus")>=0||s.indexOf("sel-in-focus")>=0)r.quick_edit(i);else if(s.indexOf("ui-toggle")>=0)r.toggle_interface_feature(i);else if(s.indexOf("css-code-wrap")>=0)r.get_editor_height(i);else if(s.indexOf("mt-screen-preview")>=0)r.toggle_screen_preview(i);else if(s.indexOf("save-interface")>=0)r.user_action({items:[js_i18n_main.save_settings],val:!1,icon:"save-interface lg-icon"}),r.ajax_save_settings();else if(s.indexOf("code-save")>=0)r.code_save_button(i);else if(s.indexOf("show-dialog")>=0)r.show_dialog(i);else if(s.indexOf("close-dialog")>=0||s.indexOf("tvr-dialog")>=0)r.close_dialog(i);else if(s.indexOf("dialog-tab")>=0&&s.indexOf("dialog-tabs")<0&&s.indexOf("dialog-tab-field")<0)r.dialog_tab_pressed(i);else if(s.indexOf("add-m-query")>=0)r.add_m_query(i);else if(s.indexOf("del-m-query")>=0)r.del_m_query(i);else if(s.indexOf("reveal-hidden-form-opts")>=0)r.reveal_form_opts(i);else if(s.indexOf("folder-reset")>=0)r.ui_reset(i);else if(s.indexOf("clear-styles")>=0)r.clear_styles(i);else if(s.indexOf("switch-preview")>=0)r.toggle_system_menu_options(i);else if(s.indexOf("change-preview-url")>=0)r.change_preview_url(i);else if(s.indexOf("export-dialog-button")>=0)r.export_settings(i);else if(s.indexOf("ui-import")>=0)r.import_settings();else if(s.indexOf("save-preferences")>=0)r.save_preferences();else if(s.indexOf("update-media-queries")>=0)r.save_media_queries();else if(s.indexOf("reveal-unlock")>=0)e("#tvr_validate_form").addClass("show"),i.parent("p").hide();else if(s.indexOf("explain-link")>=0)r.toggle_help_info(i);else if(s.indexOf("restore-link")>=0)r.restore_rev(i);else if(s.indexOf("folder-menu-arrow")>-1||s.indexOf("selector-count-state")>-1||s.indexOf("folder-count-wrap")>-1||s.indexOf("folder-state-count")>-1)r.toggle_folder(i);else if(s.indexOf("new-section-input")>=0);else if(s.indexOf("new-section-add")>=0)r.add_section(i);else if(s.indexOf("toggle-rename-section")>=0)r.toggle_rename_section(i);else if(s.indexOf("cancel-rename-section")>=0)r.toggle_rename_section(i);else if(s.indexOf("rename-button")>=0)r.action_rename_section(i);else if(s.indexOf("copy-section")>=0)r.copy_section(i);else if(s.indexOf("delete-section")>=0)r.delete_section(i);else if(s.indexOf("reveal-add-selector")>=0)r.toggle_add_selector(i);else if(s.indexOf("cancel-add-selector")>=0)r.toggle_add_selector(i);else if(s.indexOf("add-selector")>=0&&s.indexOf("form")<0)r.add_selector(i);else if(s.indexOf("toggle-modify-selector")>=0||s.indexOf("cancel-edit-selector")>=0)r.toggle_modify_selector(i);else if(s.indexOf("edit-selector")>=0&&s.indexOf("form")<0)r.action_modify_selector(i);else if(s.indexOf("copy-selector")>=0)r.copy_selector(i);else if(s.indexOf("delete-selector")>=0)r.delete_selector(i);else if(s.indexOf("change-selector")>=0)r.tvr_iterate_selectors_v(i);else if(s.indexOf("scroll-buttons")>=0)r.quick_nav(i);else if(s.indexOf("cancel-wizard")>=0)r.hide_wizard();else if(s.indexOf("adv-main-label")>=0)r.toggle_adv_wizard();else if(s.indexOf("refine-button")>=0&&s.indexOf("disabled")<0)r.switch_html_element(i);else if(s.indexOf("wizard-add")>=0)r.wizard_new_selector(i);else if(s.indexOf("pg-icon")>=0)r.pg_icon_pressed(i);else if(s.indexOf("css-tab")>=0&&s.indexOf("active")<0)r.css_tab_pressed(i);else if(s.indexOf("adv-tab")>=0&&s.indexOf("active")<0)r.adv_tab_pressed(i);else if(s.indexOf("mq-tab")>=0)i=i.closest("span.mq-tab"),r.mq_tab_pressed(i);else if(s.indexOf("add-mq-icon")>=0)r.show_add_mq(i);else if(s.indexOf("clear-icon")>=0)r.clear_data_level(i);else if(s.indexOf("tvr-image-upload")>=0)r.launch_img_uploader(i);else if(s.indexOf("clear-bg-image")>=0)r.clear_bg_image(i);else if(s.indexOf("combobox")>=0)r.combobox_clicked(i);else if(s.indexOf("g-font")>=0){var l=i.closest(".field-wrap");r.gFontTarget=l.find(".property-input"),r.show_google_fonts(l)}else s.indexOf("css-info")>=0?r.load_css_ref(i):s.indexOf("input-icon-toggle")>=0?r.input_icon_toggle(i):s.indexOf("css-group-heading")>=0||s.indexOf("accordion-menu-arrow")>=0||s.indexOf("text-for-group")>=0?(i=i.closest(".css-group-heading"),r.update_accordion(i,e("#html-computed-css"))):s.indexOf("sug-sel")>=0&&r.sug_css_clicked(i)}),t.endT("total init")},show_main_menu:function(e){return r.itemAlreadyExpanded?!1:(r.set_popdown_height(".menu-scrollable"),void e.addClass("on expanded"))},set_popdown_height:function(t){var a=r.stat.body.height()-40,i=".menu-scrollable"==t?107:26;e("#main-menu-popdown").css("max-height",a).find(t).css("max-height",a-i)},hide_main_menu:function(){r.clean_tooltips(),e("#tvr-main-menu").removeClass("on expanded")},quick_edit:function(t){if(r.itemAlreadyExpanded)return!1;var a=r.get_meta(e("#"+r.selInFocusID),"selector");e("#main-menu-popdown").addClass("bye-for-now"),a.sectionM.addClass("hello-me");var i=a.sectionM.find(".menu-arrow"),s=a.selectorM.find(".edit-selector-form");if(i.hasClass("on")||r.toggle_folder(i),t.hasClass("sec-in-focus")){var n=a.sectionM;s.hasClass("show")&&r.toggle_modify_selector(s),a.sectionM.find(".folder-icon").removeClass("sortable-icon"),r.set_popdown_height(".section-tag.hello-me")}else{var n=a.selectorM;s.hasClass("show")||r.toggle_modify_selector(s),a.sectionM.addClass("goodbye-section"),a.selectorM.addClass("hello-me"),a.selectorM.find(".selector-icon").removeClass("sortable-icon"),r.set_popdown_height(".selector-tag.hello-me")}n.addClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar({theme:"dark-3",scrollInertia:0,mouseWheel:{enable:!0,normalizeDelta:!1,scrollAmount:40}}),t.addClass("on")},close_quick_edit:function(){r.clean_tooltips(),window.TvrSharedVars.highlightEnabled&&window.TvrSharedVars.tmpHighlighting&&r.return_normal_highlighting();var t=e("#main-menu-popdown"),a=t.find(".quick-edit-mode");if(a.hasClass("section-tag"))var i="folder",s=r.get_meta(a,"section"),n=s.sectionM;else{var i="selector",s=r.get_meta(a,"selector"),o=s.selectorM.find(".edit-selector-form");o.hasClass("show")&&o.removeClass("show");var n=s.sectionM.add(s.selectorM)}a.find("."+i+"-icon").addClass("sortable-icon"),a.removeClass("quick-edit-mode scrollable-area-not-live expanded").mCustomScrollbar("destroy");var l=s.sectionM.find(".menu-arrow");l.hasClass("on")&&r.toggle_folder(l),e("#current-selector").find(".on").removeClass("on"),n.removeClass("hello-me goodbye-section").css("max-height",""),t.removeClass("bye-for-now")},close_all_expanded:function(e,a){return e.hasClass("on")?r.itemAlreadyExpanded=!0:r.itemAlreadyExpanded=!1,!t.isDomEl(e.closest(".expanded"))&&!t.isDomEl(e.closest(".sp-container"))||e.hasClass("change-selector")?(r.expanded("main_menu")?r.hide_main_menu():(r.expanded("quick_section")||r.expanded("quick_selector"))&&r.close_quick_edit(),void(window.TvrSharedVars.colorPickerDragging||r.picker_method("hide"))):!1},clean_tooltips:function(){if("native"==r.tooltipDelay)return!1;if("native"!=r.tooltipDelay){var a=r.stat.body.data("ui-tooltip");if(t.hasValue(a))for(var i in a.tooltips)e("#"+i).remove()}},reset_global_vars:function(){t.startT("reset global vars"),r.selInFocusID="",window.TvrSharedVars.curSelCSS="#no-element",window.TvrSharedVars.intelli_css="#no-element",window.TvrSharedVars.pgInFocus="",window.TvrSharedVars.compPgInFocus="",t.endT("reset global vars")},update_global_vars:function(a){r.selInFocusID=a.selectorID,window.TvrSharedVars.curSelCSS=t.custom_escape_quotes(a.selectorM.find(".selector-css-textarea").val()),e("#last-edited-selector").val(r.selInFocusID),e.get(r.ajaxUrl+"&mcth_simple_ajax=1&last_viewed_selector="+r.selInFocusID,function(){});
var i=e("#current-selector"),s="",n="";r.is_dis(a.sectionM)&&(s+="item-disabled"),r.is_dis(a.selectorM)&&(n+="item-disabled"),e("#sec-in-focus").hasClass("on")&&(s+=" on"),e("#sel-in-focus").hasClass("on")&&(n+=" on"),i.html('<span class="breadcrumb-arrow first-breadcrumb sec-in-focus-arrow">&raquo;</span><span id="sec-in-focus" class="sec-in-focus '+s+'" title="'+js_i18n_main.qedit_current_folder+'">'+a.sectionH+'</span> <span class="breadcrumb-arrow  sel-in-focus-arrow">&raquo;</span> <span id="sel-in-focus" class="sel-in-focus '+n+'" title="'+js_i18n_main.qedit_current_selector+'">'+a.selectorH+"</span>")},menu_object:function(t){return e("#"+t.replace("opts","strk"))},section_slug:function(t){var a=r.get_meta(e("#"+t),"selector");return a.sectionSlug},is_cur:function(e,t){if("sec"==e){if(t==r.section_slug(r.selInFocusID))return!0}else if("sel"==e&&t==r.selInFocusID)return!0;return!1},is_dis:function(e){return!!e.hasClass("item-disabled")},allowed_action:function(e,a){var i=!1;if(!r.trial)return!0;if("Edit Sel"==a&&t.isDomEl(e.closest(".trial-disabled")))var i=!0;if("Add Sel"==a&&r.totalSels>=15)var i=!0;return i?(alert(r.trialNotice),!1):!0},load_css_ref:function(e){r.show_dialog(e)},show_google_fonts:function(t){t.show("fast"),e.colorbox({href:e("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0})},hide_google_fonts:function(e,t){r.gFontTarget.val("").prop("val",""),t.hide()},insert_google_font:function(t){e.colorbox.close(),r.gFontTarget.val(t).focus(),r.post_edit(r.gFontTarget),r.ajax_save_settings("",r.gFontTarget)},launch_img_uploader:function(e){return wp.media.editor.send.attachment=function(t,a){r.update_bg_image(e,a.url)},wp.media.editor.open(e),!1},update_bg_image:function(e,a){var i=r.get_meta(e,"property");i.property.find(".image-url-store").val(a),i.property.find(".img_display").val(t.basename(a)),r.ajax_save_settings("",i.property.find(".img_display")),r.adjust_comp_span(i.property.find(".img_display"),"after")},clear_bg_image:function(e){r.update_bg_image(e,"")},init_editor_deps:function(e){r.Range=ace.require("ace/range").Range,r.Search=ace.require("ace/search").Search},initiate_editor:function(e,t){ace.require("ace/ext/language_tools");var r=TvrEditors[e]=ace.edit(e),a=1==TvrPref.dark_editor?"merbivore":"chrome";return r.setTheme("ace/theme/"+a),r.getSession().setMode("ace/mode/"+t),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),r.setHighlightActiveLine(!1),r.setShowPrintMargin(!1),r.setFontSize(14),r.$blockScrolling=1/0,r.setOption("dragEnabled",!1),r},set_editor_content:function(e,t,a){var i=e.attr("id"),s=e.prev("textarea").val();"css"!=a&&(s=a.selectorM.find(".selector-css-textarea").val()+" {\n	"+s+"\n}"),t.setValue(s),t.session.setUndoManager(new ace.UndoManager);var n=t.session.getLength();if(r.editor_update_height(t,e,16*n),"css"!=a){var o=(new r.Search).set({needle:"{",backwards:!1,wrap:!1,caseSensitive:!1,wholeWord:!1,range:null,start:new r.Range(0,0,0,0),regExp:!1,skipCurrent:!1}),l=o.find(t.getSession()),c=new r.Range;c.start=t.session.doc.createAnchor(0,0),c.end=t.session.doc.createAnchor(l.end.row,l.end.column),TvrEditors[i+"OpeningRange"]=c;var d=new r.Range,_=n-1;d.start=t.getSession().doc.createAnchor(_,0),d.end=t.getSession().doc.createAnchor(_,1),TvrEditors[i+"ClosingRange"]=d,t.session.addMarker(c,"tvr-disable","text",!0),t.session.addMarker(d,"tvr-disable","text",!0)}return t.gotoLine(n-1,0),t.navigateLineEnd(),t.focus(),n},selection_text:function(e){var t={};return t.selection=e.getSelectionRange(),t.startIndex=e.session.doc.positionToIndex(t.selection.start,0),t.endIndex=e.session.doc.positionToIndex(t.selection.end,0),t.selected=t.endIndex!=t.startIndex?1:0,t},intersects:function(e,t,r,a,i){if(r)return t.intersects(r);var s=0;for(var n in a)if(a[n]>=t.start.row&&a[n]<=t.end.row){s=1;break}if(s&&i){s=0;for(var n in i)if(i[n]>=t.start.column&&i[n]<=t.end.column){s=1;break}}return s},editor_update_height:function(e,t,a,i){a=192>=a||i?a:192,t.parent().height(a),e.resize(),r.toolbar_adjusted()},ace_sync_textarea:function(e,t,a,i){e.addClass("changed");var s=e.prev("textarea"),n=e.hasClass("pg-css-styles")?r.extract_inner_styles(t.session.getValue()):t.session.getValue();s.val(n).text(n)},check_feathers_after_prop_change:function(e){r.section_check_values(e.section,!0,!0,!1,!1),r.tab_check_values(e.selector,r.get_mq_focus(),!0,!0)},get_editor:function(e,t){return t&&(e=e.next("pre")),TvrEditors[e.attr("id")]},editor_line:function(e,t){for(var r=e.getSelectionRange().end.row,a=js_i18n_main.editor_updated,i=r;i>-1;i--){var s=e.session.getLine(i).trim();if(t&&s.indexOf("{")>-1)break;if(""!=s){a=s;break}}return a},bind_editor:function(a,i,s,n){t.startT("bind_editor"),a.find("pre."+i+":not(.ace_editor)").each(function(){var a=e(this),i=a.attr("id"),o=r.initiate_editor(i,s),l=r.set_editor_content(a,o,n);o.session.doc.on("change",function(e){var t=o.session.getLength();r.editor_update_height(o,a,16*t),l=t,r.ace_sync_textarea(a,o,i,n)}),"css"!=n&&o.commands.on("exec",function(a){var i=a.editor,s=e(i.container),n=s.attr("id"),o=a.command,l=TvrEditors[n+"OpeningRange"],c=TvrEditors[n+"ClosingRange"],d=r.selection_text(i),_=i.selection.getCursor(),u=i.session.getLength(),p=u-1,f=i.session.getLine(_.row),v=r.intersects(i,d.selection,l),m=r.intersects(i,d.selection,c),g=!1;if("backspace"==o.name){var h=r.intersects(i,d.selection,!1,[l.end.row+1],[0]);g=h&&!d.selected?1:0}var w=!1;if("del"==o.name){var b=r.intersects(i,d.selection,!1,[p-1],[f.length]);w=b&&!d.selected?1:0}var x=["golineup","golinedown","gotoright","gotoleft"];t.in_array(o.name,x)||(v||m||g||w)&&(a.preventDefault(),a.stopPropagation(),r.update_full_logs({"short":js_i18n_main.edit_elsewhere_short,"long":"<p>"+js_i18n_main.edit_elsewhere_long+"</p>",type:"warning"}))})}),t.endT("bind_editor",0)},input_icon_toggle:function(t,a){var i,s,n=t,o=t.attr("data-input-type"),l=t.attr("data-input-level"),c=r.title(t),d=o+"-tracker",_="disabled"==o&&"tab"==l?t.closest(".mq-tab").attr("rel"):r.get_mq_focus(),u="tvr_mcth",p="";if("all-devices"!=_&&(u+="[non_section][m_query]["+_+"]",p="[m_query]["+_+"]"),"important"==o)i=r.get_meta(t,"property"),s="tvr_mcth[non_section][important]"+p+"["+i.sectionSlug+"]["+i.selectorSlug+"]["+i.groupSlug+"]["+i.propertySlug+"]";else if("pie"==o)i=r.get_meta(t,"selector"),s=i.selectorM.find("input.register-selector").attr("name")+"["+o+"]";else if("disabled"==o){var f;i="tab"==l?r.get_meta(e("#"+r.selInFocusID),"selector"):r.get_meta(t,l),"section"==l?(f=r.disabled_quick_edit(i.sectionM,l,i),s=f.find("input.section-display-name").attr("name").replace("[label]","["+o+"]")):"selector"==l?(f=r.disabled_quick_edit(i.selectorM,l,i),s=f.find("input.register-selector").attr("name")+"["+o+"]"):"tab"==l?(f=t.closest(".mq-tab"),d+="-"+_,s=u+"["+i.sectionSlug+"]["+i.selectorSlug+"][tab]["+o+"]",n=i.selectorM.find("span.edit-selector")):"subgroup"==l&&(f=t.closest("span.quick-opts-wrap"),s=u+"["+i.sectionSlug+"]["+i.selectorSlug+"][pg_"+o+"]["+i.subgroupSlug+"]")}else"chained"==o&&(i=r.get_meta(t,"subgroup"),s=u+"["+i.sectionSlug+"]["+i.selectorSlug+"][pg_"+o+"]["+i.subgroupSlug+"]");if(t.hasClass("active")){t.removeClass("active");var v="remove",m=t.attr("data-pos");n.siblings("."+d).remove(),"disabled"==o&&f.removeClass("item-disabled")}else{var g='<input class="'+d+'" type="hidden" name="'+s+'" value="1" />';t.addClass("active");var v="add",m=t.attr("data-neg");n.before(g),"disabled"==o&&f.addClass("item-disabled")}r.refresh_tt(t,m);var h=r.h_i_class(l,i),w=t.attr("class"),b=!1,x=!1,T=!1;"important"==o&&(w+=" lg-icon",T="i",x=b=r.chain_is_on(i)?i.subgroupH+" "+js_i18n_main.fields_sync:!1,x&&!a&&r.sync_important(i,v)),a||(r.user_action({items:[l],val:c,valTT:b,M:i,pathTT:"section"!=l,icon:[{icon:h},{icon:w,iconC:T}]}),r.ajax_save_settings())},disabled_quick_edit:function(e,t,a){return"section"==t&&r.is_cur("sec",a.sectionSlug)&&(e=e.add("#sec-in-focus")),"selector"==t&&r.is_cur("sel",a.selectorID)&&(e=e.add("#sel-in-focus")),e},auto_clean:function(e,t){},icon:function(e){return""},title:function(e){var t=e.data("ui-tooltip-title");return t?t:e.attr("title")},crumb_str:function(e,t){var a="",i="<span>",s="</span>",n=e.val;e.plainText&&(i=s="");for(var o in e.items){var l=e.items[o],c=e.M?e.M[l+"H"]:l,d="property"==l?"\n":"";if(c=d+i+c+s,a+=0!=o?i+"&nbsp;&raquo;&nbsp;"+s+c:c,l==t)break}var _=a;if(e.plainText||(_='<span class="his-items">'+a+"</span>"),n){var u=i,p="";e.plainText||(u='<span class="his-val">',e.valTT&&(p='<span class="info-icon tvr-icon" title="'+e.valTT+'"></span>'),e.M&&"code"!=e.M.groupSlug&&(n=r.colored_box(n,!0))),n=u+n+s+p;var f=i+"&nbsp;:&nbsp;"+s;_=e.valFirst?n+f+_:_+f+n}return _},user_action:function(a){var i=e.extend(!0,{},a);i.icon_html=i.pathTT_html="",i.target_depth=a.items[a.items.length-1],i.main_class=a.main_class?a.main_class:"";var s=a.M;if(i.targ_and_val=r.crumb_str(a,i.target_depth),a.pathTT&&(a.plainText=!0,a.M&&(a.items=["section","selector","tab","subgroup","property"]),i.pathTT_crumbs=r.crumb_str(a,i.target_depth),i.pathTT_html='title="'+i.pathTT_crumbs+'"',i.main_class+=" has-path-tt"),a.icon){if(s&&s.propertySlug){var n=s.property.attr("class").split(" ");for(var o in n)if(n[o].indexOf("icon-size")>-1){i.main_class+=" "+n[o];break}}"string"===e.type(a.icon)?i.icon_html=r.history_icon(a.icon,a.iconC,a.tt):i.icon_html+=r.history_icon(a.icon[1].icon,a.icon[1].iconC,a.icon[1].tt)}i.html='<span class="history-item history_'+t.convert_to_param(i.target_depth)+i.main_class+'"'+i.pathTT_html+">"+i.targ_and_val+"</span>",delete i.M,e("#user-action").text(JSON.stringify(i))},h_i_class:function(e,t){var a=r.hi[e];if("subgroup"==e)a="lg-icon pg-icon-"+t.groupSlug;else if("property"==e){t.property.find("span.option-icon");a=t.property.find("span.option-icon").attr("class").replace("tvr-icon","")}return a},history_icon:function(e,t,r){return t=t?t:"",r=r?'title="'+r+'"':"",'<span class="h-i no-click '+e+'" '+r+">"+t+"</span>"},enable_tt:function(){r.stat.body.tooltip({position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:r.tooltipDelay},open:function(e,a){var i=r.get_tt(a),s=r.get_tt_trigger(e,this);i.find(".ui-tooltip-content").html();i.html(i.html().replace(/\n/g,"<br />")).append('<span class="tp-pointer"></span>');var n=i.find(".tp-pointer");t.isDomEl(s)?n.position({my:"center center",at:"center bottom+12",of:s}):n.hide()},close:function(e,t){}})},get_tt:function(e){return r.tt=e.tooltip},get_tt_trigger:function(t,a){return r.tt_trigger=e(t.originalEvent.target||t.originalEvent.srcElement).closest(e(a).tooltip("option","items")),r.tt_trigger},refresh_tt:function(e,t){"native"!=r.tooltipDelay?r.update_tt(r.tt,t):e.attr("title",t)},update_tt:function(e,t){e.find(".ui-tooltip-content").html(t.replace("\n","<br />")),r.tt_trigger.data("ui-tooltip-title",t)},get_meta:function(t,a){r.meta={};var i=["stub","section","selector","group","subgroup","property"];for(var s in i)if(i[s]==a){if(t.attr("class")&&t.attr("class").indexOf(a+"-tag")>=0)var n=t;else var n=t.closest("."+a+"-tag");var o=n.attr("id"),l=o.split("-")}var c="";for(var d in l)if(0!=d&&6!=d&&7!=d){if(a=i[d],c+="-"+l[d],"property"==a||"subgroup"==a){var _=c,u="property"==a?_+"-"+l[6]:_+"-subgroup-"+l[6];"all"==l[6]&&(l[6]+="-devices",u+="-devices"),r.meta.tabSlug=l[6],r.meta[a]=e("#opts"+u)}else r.meta[a]=e("#opts"+c);if(r.meta[a+"Slug"]=l[d],"section"==a)r.meta[a+"M"]=e("#strk"+c),r.meta[a+"T"]=r.meta[a+"M"].find("input.section-tracker"),r.meta[a+"H"]=r.meta.sectionM.find(".section-display-name").val(),r.meta[a+"ID"]="opts-"+r.meta.sectionSlug,r.meta[a+"MID"]="strk-"+r.meta.sectionSlug;else if("selector"==a){r.meta[a+"M"]=e("#strk"+c);var p=r.meta.selectorM.find(".selector-label").val().split("|");r.meta[a+"T"]=r.meta[a+"M"].find("input.selector-tracker"),r.meta[a+"H"]=p[0],r.meta[a+"ID"]="opts-"+r.meta.sectionSlug+"-"+r.meta.selectorSlug,r.meta[a+"MID"]="strk-"+r.meta.sectionSlug+"-"+r.meta.selectorSlug}else"group"==a?r.meta[a+"ID"]="opts-"+r.meta.sectionSlug+"-"+r.meta.selectorSlug+"-"+r.meta.groupSlug:"subgroup"==a||"property"==a&&(r.meta.subgroupH=r.meta.subgroup.find("span.subgroup-label").text(),r.meta[a+"H"]=r.meta[a].find("span.option-label").text())}return r.meta.tabSlug||(r.meta.tabSlug=r.get_mq_focus()),r.meta.tabH=r.get_tab_name(r.meta.tabSlug),r.meta},colorpicker_bind:function(a){t.startT("colorpicker_bind"),a.find("input.color:not(.bound)").spectrum({appendTo:"parent",showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"hex3",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){},show:function(t){var a=r.get_meta(e(this),"property"),i=r.inputWaitingObj=a.property.find("input.color"),s=a.property.find(".sp-container"),n=parseInt(s.css("top").replace("px",""));if(!s.hasClass("extra-fields-added")){var o='<div class="sp-mt-inputs">';o+='<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">',o+='<input type="text" class="sp-input-rgb sp-input">',o+='<input type="text" class="sp-input-hsl sp-input">',o+='<input type="text" class="sp-input-hex sp-input">',o+="</div>",s.addClass("extra-fields-added").append(o).wrapInner("<div class='sp-wrap'>"),s.find(".sp-clear").bind("click.mt",function(e){r.clear_spectrum_inputs(a,!0)})}if(s.css("top",n+27),a.property.hasClass("manual-val"))r.update_spectrum_inputs(t,i,{},!0);else{var l=a.property.find("span.comp-style").find("span").attr("style");if(l){var c=l.split("background-color:");r.update_spectrum(c[1],i,{},!0)}}},move:function(t){r.update_spectrum_inputs(t,e(this),{},!0),r.typingTimer&&clearTimeout(r.typingTimer),r.typingTimer=setTimeout(r.done_typing,200)}}).on("dragstart.spectrum",function(e,t){window.TvrSharedVars.colorPickerDragging=!0}).on("dragstop.spectrum",function(e,t){window.TvrSharedVars.colorPickerDragging=!1}).addClass("bound"),t.endT("colorpicker_bind",0)},picker_method:function(e){if(t.isDomEl(r.inputWaitingObj))if("hide"==e)r.inputWaitingObj.spectrum("hide");else if("clickpick"==e){var a=r.get_meta(r.inputWaitingObj,"property");a.property.find(".sp-container").trigger("mouseup")}},update_spectrum:function(e,t,a,i){var s=tinycolor(e),n=s.toRgb();tinycolor(n).isValid()&&(t.spectrum("set",n),r.update_spectrum_inputs(s,t,a,i))},update_spectrum_inputs:function(e,a,i,s){if(!e)return void a.val("");a.val(e.toRgbString());var n=r.get_meta(a,"property");n.property.find(".sp-input-hex").not(i).val(e.toHexString()),n.property.find(".sp-input-rgb").not(i).val(e.toRgbString()),n.property.find(".sp-input-hsl").not(i).val(e.toHslString()),n.property.find(".sp-input-opacity").not(i).val(e.toRgb().a),s&&r.maybe_sync_fields(a),t.isDomEl(i)&&i.focus()},clear_spectrum_inputs:function(e,t){e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),t&&(r.picker_method("hide"),r.maybe_sync_fields(e.property.find("input.color")))},update_count:function(a,i,s,n,o){t.hasValue(o)||(o=0);var l=parseInt(a.attr("rel"));if("add"==i)var c=l+parseInt(s);else if("subtract"==i)var c=l-parseInt(s);if(a.attr("rel",c),"section"!=n){if(0==l){a.after(' <span class="count-wrap">(<span class="state-count"></span>)</span>')}if(0==c){a.next("span").remove()}else a.next("span").find(".state-count").text(parseInt(c))}if("section"==n){var d=e("#total-sec-count"),_=parseInt(d.text());c>l?(window.TvrSharedVars.totalSecs=parseInt(_+s),d.text(window.TvrSharedVars.totalSecs),r.totalSels=r.totalSels+parseInt(o),e("#total-sel-count").text(parseInt(r.totalSels))):(window.TvrSharedVars.totalSecs=parseInt(_-s),d.text(window.TvrSharedVars.totalSecs),r.totalSels=r.totalSels-parseInt(o),e("#total-sel-count").text(parseInt(r.totalSels)))}else if("selector"==n){var u=e("#total-sel-count"),p=parseInt(u.text());c>l?(r.totalSels=parseInt(p+s),u.text(r.totalSels)):(r.totalSels=parseInt(p-s),u.text(r.totalSels))}r.toggle_enabled_buttons()},com_data_loading:function(t,a,i){t.find("."+a+"-row").append(e("#loading-gif-template").clone().removeAttr("id")),r.update_prog_indicator("plus",js_i18n_main.load_style_opt)},com_data_finished_loading:function(e,t){e.find("img.ajax-loader").remove(),r.update_prog_indicator("minus",t,js_i18n_main.load_style_opt)},ajax_load_ui_data:function(a,i,s,n,o,l,c,d){r.dataLoading=!0,r.log_action(i,"data-load");var _=e("#ui-nonce").text(),u="admin.php?page=tvr-microthemer.php",p="action=tvr_microthemer_ui_load_styles&tvr_load_section="+n;p+="&tvr_load_type="+l,p+="&_wpnonce="+_;p+="&tvr_load_selector="+o,e.ajax({type:"GET",url:u,async:!0,data:p,timeout:2e4,error:function(e,t){r.com_data_finished_loading(i,[js_i18n_main.load_style_opt_failed,"<p>"+r.handle_ajax_error(e,t)+"</p><p>"+js_i18n_main.load_failed_explain+"</p>"])},success:function(n){r.unlog_action(i,"data-load");var o=e(n).find("#tmp-wrap").html();if(a.append(o),s.val(2),3!=c)if(r.com_data_finished_loading(i),d==js_i18n_main.load_before_modifying)r.toggle_modify_selector(i.find(".edit-icon").first());else if(d==js_i18n_main.load_before_iterating)r.tvr_iterate_selectors_v(i);else if(d==js_i18n_main.load_before_copying)r.copy_selector(i.find("span.copy-icon").first());else if(d==js_i18n_main.load_after_moving){var l={item:i};t.selector_received({},l)}else d==js_i18n_main.load_before_clearing&&r.clear_data_level(i.find("span.clear-icon").first());else--r.selsToLoad,0==r.selsToLoad&&(r.unlog_action(i,"all-sels-loading"),d==js_i18n_main.sec_rename?r.toggle_rename_section(i.find("span.toggle-rename-section")):d==js_i18n_main.sec_copy?r.copy_section(i.find(".copy-icon")):d==js_i18n_main.sec_clear&&r.clear_data_level(i.find("span.clear-icon").first()),r.com_data_finished_loading(i))},complete:function(){r.unlog_action(i,"data-load"),r.dataLoading=!1}})},ajax_load_revisions_table:function(){r.update_prog_indicator("plus",js_i18n_main.load_revisions_table);var t=e("#revisions-url").attr("rel");e.ajax({type:"GET",url:t,async:!0,timeout:2e4,error:function(e,t){r.update_prog_indicator("minus",{"short":js_i18n_main.load_revisions_table_failed,"long":"<p>"+r.handle_ajax_error(e,t)+"</p>"},js_i18n_main.load_revisions_table)},success:function(t){var a=e(t).find("#tmp-wrap").html();e("#revision-area").html(a),r.update_prog_indicator("minus",!1,js_i18n_main.load_revisions_table)},complete:function(){}})},ajax_load_css:function(t,a){r.update_prog_indicator("plus",js_i18n_main.retrieve_css),a+="?nocache="+(new Date).getTime(),e.ajax({type:"GET",url:a,dataType:"text",async:!0,timeout:2e4,error:function(e,t){r.update_prog_indicator("minus",{"short":js_i18n_main.retrieve_css_failed,"long":"<p>"+r.handle_ajax_error(e,t)+"</p>"},js_i18n_main.retrieve_css)},success:function(e){r.update_view_css(t,e),r.update_prog_indicator("minus",!1,js_i18n_main.retrieve_css)},complete:function(){}})},update_view_css:function(a,i){var s=a,n=e("#generated-css-"+s),o=n.attr("id");n.prev("textarea").val(t.escapeHTML(i)),n.hasClass("ace_editor")?r.set_editor_content(n,TvrEditors[o],"css"):r.bind_editor(n.parent(),"generated-css",n.data("mode"),"css");var l=TvrEditors[o];l.setReadOnly(!0),n.hasClass("min")&&(l.setOptions({wrap:!0,indentedSoftWrap:!1}),l.session.setUseWrapMode(!0),l.session.setWrapLimitRange(null,90));var c=n.closest(".dialog-tab-field").height();r.editor_update_height(l,n,c,!0);var d=1;if(0===a&&r.scssError){var _=e("#display-css-code-dialog").find("span.dialog-tab-0");r.dialog_tab_pressed(_),d=r.scssError,l.setHighlightActiveLine(!0)}else l.setHighlightActiveLine(!1);l.gotoLine(d,0),l.navigateLineEnd(),l.scrollToLine(d,!0,!0,function(){})},ui_reset:function(t){var a=confirm(js_i18n_main.reset_settings_confirm);if(!a)return!1;var i="reset",s=e("#ui-url").attr("rel"),n=js_i18n_main.reset_empty_folders,o="GET",l=e("#resetUrl").attr("rel");r.general_ajax_submission(i,s,n,o,l)},clear_styles:function(t,a,i){var s=confirm(js_i18n_main.clear_styles_confirm);if(!s)return!1;var n="clear",o=e("#ui-url").attr("rel"),l=js_i18n_main.clear_styles,c="GET",d=e("#clearUrl").attr("rel");r.general_ajax_submission(n,o,l,c,d)},restore_rev:function(t){var a=confirm(js_i18n_main.restore_settings_confirm);if(!a)return!1;var i="restore",s=e("#ui-url").attr("rel"),n=js_i18n_main.restore_settings,o="GET",l=t.attr("rel");r.general_ajax_submission(i,s,n,o,l)},set_typing_timer:function(){r.typingTimer&&clearTimeout(r.typingTimer),r.typingTimer=setTimeout(r.done_typing,r.doneTypingInterval)},extract_inner_styles:function(e){e=e.slice(0,-1),e=e.split("{");var t=e[1]?e[1]:"";return t&&(e.shift(),t=e.join("{")),t.trim()},post_edit:function(t){t.each(function(t){var a=e(this);r.update_input_width(a),r.adjust_comp_span(a,"after")})},input_pre_save:function(e){var a=r.get_meta(e,"property");e.hasClass("color")&&r.adjust_comp_span(e,"after");var i,s=r.maybe_set_unit(a,e);i=e.hasClass("tvr-editor-hidden")?r.editor_line(r.get_editor(e,!0),!0):e.val(),i=i?i:js_i18n_main.value_cleared;var n=s&&s.calc?s.calc:"",o=r.chain_is_on(a)||r.dblclickToSync?a.subgroupH+" "+js_i18n_main.fields_sync:"";r.dblclickToSync=!1;var l=n?"\n":"";n+=o?l+o:"",!r.skipInputHistory&&t.isDomEl(a.property)&&r.user_action({items:["property"],val:i,M:a,pathTT:!0,valTT:n,icon:a.property.find("span.option-icon").attr("class").replace("tvr-icon","")}),r.skipInputHistory=!1,r.check_feathers_after_prop_change(a);var c=[],d=-1;r.is_cur("sec",a.sectionSlug)&&r.is_dis(a.sectionM)&&(c[++d]=js_i18n_main.folder_disabled),r.is_cur("sel",a.selectorID)&&r.is_dis(a.selectorM)&&(c[++d]=js_i18n_main.selector_disabled);for(var d in c){var _={"short":c[d],"long":"<p>"+js_i18n_main.enable_with_icon+"</p>",type:"warning"};r.log(_)}},get_default_unit:function(e){var t=!1;return TvrPref.my_props[e.groupSlug]&&TvrPref.my_props[e.groupSlug].pg_props&&TvrPref.my_props[e.groupSlug].pg_props[e.propertySlug]&&TvrPref.my_props[e.groupSlug].pg_props[e.propertySlug].default_unit&&(t=TvrPref.my_props[e.groupSlug].pg_props[e.propertySlug].default_unit),t},maybe_set_unit:function(e,a){var i=a.val();if(!i)return!1;var s=r.get_default_unit(e);if(t.hasValue(s)){i=i.trim().replace(/(\(.*?\))/g,function(e){return e.replace(/ /g,"")});var n={val:i,converted:!1,calc:""};if(i.indexOf(" ")<0)n=r.do_conversion(i,s,a,0);else{var o=[],l=i.split(" ");for(var c in l){var d=r.do_conversion(l[c],s,a,c);o[c]=d.val,d.converted&&(n.converted=!0,n.calc+=0!=c?", "+d.calc:d.calc)}n.val=o.join(" ")}return n.converted&&(a.val(n.val),r.update_input_width(a),r.maybe_sync_fields(a)),n}},do_conversion:function(e,a,i,s){var n={val:e,converted:!1,calc:""};if(t.isNumber(e)&&0!=e){if("px (implicit)"!=a&&a.indexOf(" to ")<0)n.val=e+a,n.converted=!0;else if(a.indexOf(" to ")>-1){var o=a.split(" to ");n=r.auto_convert(e,o[1],window.parent.TvrSharedVars.nodeCSS[0],i,e,s)}}else"="==e.charAt(0)&&(n=r.process_excel_function(e,i,s));return n},process_excel_function:function(e,a,i){var s={val:e,converted:!1,calc:""},n=e.split("(");if(!n[0]||!n[1]||n[1].indexOf(")")<0)return s;var o=n[0].replace("=",""),l=n[1].replace(")","").split(",");for(var c in l)if(l[c]=l[c].trim(),!t.isDefined(l[c]))return s;var d=window.parent.TvrSharedVars.nodeCSS[0];return l[1]&&(d=window.parent.TvrSharedVars.nodeCSS[l[1]-1]),r.auto_convert(l[0],o,d,a,e,i)},auto_convert:function(a,i,s,n,o,l){var c,d,_,u,p,f,v={val:o,converted:!1,calc:""},m=r.get_meta(n,"property"),g=m.propertySlug,h=!1;if(TvrAutoMap[g]&&TvrAutoMap[g][i]){if(!e.isPlainObject(TvrAutoMap[g][i])&&!TvrAutoMap[g][i][0]){var w={"short":"Auto-conversion aborted","long":"<p>"+TvrAutoMap[g][i]+"</p>",type:"warning"};return r.log(w),v}c=TvrAutoMap[g][i].node,d=TvrAutoMap[g][i].prop,e.isArray(d)&&(d=d[l]),d=d.replace(/_/g,"-"),_=parseInt(s[c][d].replace("px","")),t.hasValue(TvrAutoMap[g][i].tip)&&(h="<p>"+TvrAutoMap[g][i].tip+"</p>")}if("%"==i?(u=a/_*100,p=a+"px / "+_+"px * 100 = "+parseFloat(u.toFixed(3).toString())+i,f=a+"px divided by "+_+"px ("+c+" "+d+") multiplied by 100 = <b>"+u+i+"</b>"):"em"!=i&&"rem"!=i||(d="font-size","em"==i?(c="element","font_size"==g&&(c="parent"),_=parseInt(s[c]["font-size"].replace("px",""))):(c="HTML base",_=r.baseFontSize),u=a/_,p=a+"px / "+_+"px = "+parseFloat(u.toFixed(3).toString())+i,f=a+"px divided by "+_+"px ("+c+" "+d+") = <b>"+u+i+"</b>"),!u)return v;var w={"short":p,"long":"<p>"+js_i18n_main.auto_conversion_performed+": <b>"+o+"</b><br />"+f+"<br />"+js_i18n_main.auto_values_rounded+"</p>",type:"info"};return h&&(w["long"]+=h),r.log(w),v={val:parseFloat(u.toFixed(3).toString())+i,converted:!0,calc:p}},update_interface_state:function(t){var r;jQuery.each(jQuery.browser,function(e,t){r+=e+" : "+t+"\n"}),e("#error-report-form").find('textarea[name="tvr_php_error"]').val(t).end().find('textarea[name="tvr_serialised_data"]').val(e("#tvr-serialised-data").val()).end().find('textarea[name="tvr_browser_info"]').val(r)},code_save_button:function(e){e.hasClass("custom")?(r.user_action({items:[js_i18n_main.custom_code],val:r.editor_line(r.get_editor(e.prev("pre"))),icon:"option-icon option-icon-css",main_class:"icon-size-3"}),r.ajax_save_settings()):r.ajax_save_settings("",e.siblings("textarea"))},ajax_save_settings:function(a,i){if(r.saveInProgress)return r.reSave=!0,r.inputWaitingObj=i,!1;r.saveInProgress=!0,r.update_prog_indicator("plus",js_i18n_main.save_settings),t.isDomEl(i)&&r.input_pre_save(i);var s=e("#ui-url").attr("rel"),n=(e("#tvr_microthemer_ui_serialised"),t.escape_backslashes(e("#tvr_microthemer_ui_save, #microthemer_ui_settings_export").serialize(),!0));e("#tvr-serialised-data").val(n),e.ajax({type:"POST",url:s,data:e("#tvr_microthemer_ui_serialised").serialize(),timeout:2e4,error:function(e,t){r.reSave=!1,r.update_prog_indicator("minus",{"short":js_i18n_main.save_settings_error,"long":"<p>"+r.handle_ajax_error(e,t)+"</p>"})},success:function(i){if(r.reSave)return r.reSave=!1,r.saveInProgress=!1,r.update_prog_indicator("minus",c,js_i18n_main.save_settings),r.ajax_save_settings("",r.inputWaitingObj),!1;var s=e(i),n=s.find("#microthemer-notice").html(),o=e(n);if(null==n){var l=e("#log-item-template"),c={"short":l.find(".short").text(),"long":l.find(".long").html()};r.update_interface_state(i)}else{var c=r.extract_status(o);e("#script-feedback").html(s.find(".script-feedback"))}if(r.is_boring_status(c)&&(c=!1),r.update_prog_indicator("minus",c,js_i18n_main.save_settings,!0),r.js_in_focus()?(r.update_prog_indicator("plus",js_i18n_main.refresh_js),window.frames.viframe.TvrExportVars.refreshJS()):(r.update_prog_indicator("plus",js_i18n_main.refresh_styles),window.TvrSharedVars.g_url=e("#google-url-to-refresh").text(),r.iframe_functions_loaded()?window.frames.viframe.TvrExportVars.refreshCSS():window.TvrSharedVars.awaitingIframeReloadAfterSave=!0),"view-css"==a){var d=o.find("#scss-line-error");r.scssError=t.isDomEl(d)?d.data("line"):!1,e("#display-css-code-dialog").find("div.dialog-tab-field").each(function(t){var a=e(this).find("div.view-file").find("a").attr("href");r.ajax_load_css(t,a)})}if("export"==a){var _=e("#sanit-export-name").text();_&&(r.update_packs_obj(t.readable_name(_)),e("#sanit-export-name").text(""));var u=e("#export-to-pack-dialog").find("span.export-dialog-button");r.reload_manage_iframe(u),r.show_dialog(e("#v-left-controls").find("li.item-manage-design-packs"))}},complete:function(t,a){r.saveInProgress=!1,e("#user-action").text(""),e("#custom-css-js").removeClass("changed")}})},update_packs_obj:function(e){TvrCombo.directories[TvrCombo.directories.length]=e,TvrCombo.directories.sort()},handle_ajax_error:function(e,t){return 0==e.status?js_i18n_main.error_connection:404==e.status?js_i18n_main.error_404:500==e.status?js_i18n_main.error_500:"parsererror"==t?js_i18n_main.error_parser:"timeout"==t?js_i18n_main.error_timeout:js_i18n_main.error_unknown+"\n"},email_error_report:function(){r.update_prog_indicator("plus",js_i18n_main.send_error);var t=e("#ui-nonce").text(),a=e("#ui-url").attr("rel");a+="&action=tvr_error_email&_wpnonce="+t;var i=e("#error-report-form").serialize();e.ajax({type:"POST",url:a,data:i,timeout:2e4,error:function(e,t){r.update_prog_indicator("minus",{"short":js_i18n_main.send_error_failed,"long":"<p>"+r.handle_ajax_error(e,t)+"</p>"},js_i18n_main.send_error)},success:function(t){var a=e(t),i=a.find("#microthemer-notice").html();if(null==i)var s={"short":"Email report failed","long":"<p>Reason unknown.</p>"};else var s=r.extract_status(e(i));r.update_prog_indicator("minus",s,js_i18n_main.send_error)}})},show_dialog:function(a){r.close_dialog(),a=a.attr("rel")?a:a.closest("*[rel]");var i=a.attr("rel");if("not-yet"==i)return!1;if(e("#"+i+"-dialog").addClass("show"),"import-from-pack"==i&&t.hasValue(a.attr("data-pack-name"))&&e("#import_from_pack_name").val(a.attr("data-pack-name")),"export-to-pack"==i){var s="";e("#tvr-menu").find(".section-tag").each(function(){var t=r.get_meta(e(this),"section"),a=parseInt(t.sectionM.find(".selector-count-state").attr("rel")),i="",n="";a>0&&(i='checked="checked"',n="on"),s+='<li><input type="checkbox" name="export_sections['+t.sectionSlug+']" '+i+' /> <span class="fake-checkbox '+n+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+t.sectionH+"</span></li>"}),e("#available-folders").html(s);var n=e("#custom-css");e("#hand-css-area").find("textarea.hand-css-textarea").each(function(r){var a=e(this),i=n.find(".custom-"+a.attr("id"));t.hasValue(a.val())?t.check_fake(i):t.uncheck_fake(i)}),e("#export_to_pack").val(1),e("#export_pack_name").val(""),e("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")}if("display-css-code"==i){var o=e("#scss-line-error"),l=t.isDomEl(o)?r.title(o):r.title(a.find(".mt-menu-text"));r.user_action({items:[l],val:!1,icon:"display-css-code lg-icon"}),r.default_to_tab("view-css"),r.ajax_save_settings("view-css")}"display-revisions"==i&&r.ajax_load_revisions_table(),"manage-design-packs"==i&&r.reload_manage_iframe(a),"program-docs"==i&&r.reload_docs_iframe(a)},close_dialog:function(){e("#tvr").find("div.tvr-dialog").removeClass("show"),e("#export_to_pack, #new_pack").val(0)},reload_docs_iframe:function(r){var a="docs_iframe",i=e("#docs-url").attr("rel");t.hasValue(r.attr("data-docs-index"))&&(i+="&docs_index=1"),t.hasValue(r.attr("data-prop-group"))&&(i+="&prop_group="+r.attr("data-prop-group")),t.hasValue(r.attr("data-prop"))&&(i+="&prop="+r.attr("data-prop"));e("#"+a);window.frames[a].location=i},reload_manage_iframe:function(r){var a="manage_iframe",i=e("#"+a),s=i.attr("rel");(1!=i.attr("data-frame-loaded")||t.isDomEl(r.closest(".dialog-footer")))&&(window.frames[a].location=s,i.attr("data-frame-loaded",1))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},scroll_to_bottom:function(e){e.scrollTop(e.scrollHeight)},toggle_multi_checkboxes:function(t){var r=e("#available-folders, #custom-css");t.hasClass("on")?r.find("input").prop("checked",!1).end().find(".fake-checkbox").add(t).removeClass("on"):r.find("input").prop("checked",!0).end().find(".fake-checkbox").add(t).addClass("on")},import_settings:function(){if(""==e("#import_from_pack_name").val())return alert(js_i18n_main.select_design_pack),!1;if(!e("#ui-import-overwrite").is(":checked")&&!e("#ui-import-merge").is(":checked"))return alert(js_i18n_main.choose_import_method),!1;if(e("#ui-import-overwrite").is(":checked"))var t="overwrite";else var t="merge";var a="import",i=e("#ui-url").attr("rel"),s=tvrsprintf(js_i18n_main.import_settings,t),n="POST",o=e("#microthemer_ui_settings_import").serialize();r.general_ajax_submission(a,i,s,n,o)},save_preferences:function(a){var i="Preferences save",s=e("#ui-url").attr("rel"),n=js_i18n_main.saving_preferences,o="POST",l=t.escape_backslashes(e("#tvr-preferences").serialize(),!0);r.general_ajax_submission(i,s,n,o,l)},save_media_queries:function(a){var i="Media query save",s=e("#ui-url").attr("rel"),n=js_i18n_main.saving_mqs,o="POST",l=t.escape_backslashes(e("#edit-media-queries-form").serialize(),!0);
r.general_ajax_submission(i,s,n,o,l)},general_ajax_submission:function(t,a,i,s,n){r.update_prog_indicator("plus",i),e.ajax({type:s,url:a,data:n,timeout:2e4,error:function(e,a){r.update_prog_indicator("minus",{"short":t+" error","long":"<p>"+r.handle_ajax_error(e,a)+"</p>"},i),r.close_dialog()},success:function(e){window.location=a}})},export_settings:function(t){var a=e("#export_pack_name").val();if(!a)return alert(js_i18n_main.select_settings_pack),!1;var i=a.toLowerCase(),s=!1;for(var n in TvrCombo.directories)if(TvrCombo.directories[n].toLowerCase()==i){s=!0;break}s||e("#new_pack").val(1),r.user_action({items:[r.title(t)],val:a,icon:"export-to-pack lg-icon"}),r.ajax_save_settings("export")},add_m_query:function(t){var r=t.attr("rel"),a=e("#unq-base").attr("rel");t.attr("rel",++r);var i=e("li.m-query-tpl").clone().removeClass("m-query-tpl").addClass("mq-row-"+r);i.find("input, textarea").each(function(t){e(this).attr("name",e(this).attr("name").replace("key",a+r))}),e("#mq-list").append(i).find("li").filter(":last").hide().fadeIn("fast").end()},del_m_query:function(t){t.parents("li.mq-row").fadeOut("slow",function(){e(this).remove()})},reveal_form_opts:function(e){var t=e.attr("rel");e.closest("li").siblings(".hidden."+t).addClass("show")},toggle_system_menu_options:function(e){e=e.closest("li");var t=e.find(".input-wrap"),r=e.find(".mt-menu-text"),a=e.closest("ul");t.hasClass("show")?(r.text(r.data("ll")),a.removeClass("expanded"),t.removeClass("show")):(r.text(r.data("sl")),a.addClass("expanded"),t.addClass("show"))},change_preview_url:function(e){r.update_prog_indicator("plus",js_i18n_main.load_wp);var a=e.closest("li"),i=t.extract_url_path(a.find("input").val()),s=t.rtrim(r.siteUrl,"/")+i;window.frames.viframe.location=s,r.toggle_system_menu_options(a.find(".switch-preview"))},toggle_folder:function(e){var t=r.get_meta(e,"section");t.sectionM.find(".menu-arrow").hasClass("on")?r.close_folder(t):r.open_folder(t)},open_folder:function(e){e.sectionM.addClass("is-open").find(".menu-arrow").addClass("on"),e.sectionM.find("ul.selector-sub").addClass("normal")},close_folder:function(e){e.sectionM.removeClass("is-open").find(".menu-arrow").removeClass("on"),e.sectionM.find("ul.selector-sub").removeClass("normal")},update_editor_refs:function(t,r,a,i,s,n){var o="section"==t?a:a+"-"+s,l="section"==t?i:i+"-"+n;r.find("pre.custom-css-pre").each(function(){var t=e(this),r=t.attr("id");if(TvrEditors[t.attr("id")]){var a=r.replace(o,l);a!=r&&(TvrEditors[a]=TvrEditors[r],delete TvrEditors[r],TvrEditors[a+"OpeningRange"]=TvrEditors[r+"OpeningRange"],TvrEditors[a+"ClosingRange"]=TvrEditors[r+"ClosingRange"],delete TvrEditors[r+"OpeningRange"],delete TvrEditors[r+"ClosingRange"])}})},dom_replacements:function(a,i,s,n,o,l,c,d,_,u){return"section"!=a&&"selector"!=a||r.update_editor_refs(a,i,s,n,l,c),"section"==a&&(i.find("input, textarea.property-input").each(function(r){var a=e(this);t.hasValue(a.attr("name"))&&a.attr("name",a.attr("name").replace("tvr_mcth["+s+"]","tvr_mcth["+n+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+n+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+n+"]"))}),i.find(".section-name .name-text").text(o),i.find(".section-display-name").val(o),i.find(".rename-input").val(o),i.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(i).each(function(){var t=e(this);t.attr("id",t.attr("id").replace(s,n))})),"selector"==a&&(i.find(".selector-name").attr("title",t.regular_escape_quotes(_)),i.find(".selector-name .name-text").text(d),i.find(".selector-label").val(d+"|"+_),i.find(".selector-name-input").val(d),i.find(".selector-css-textarea").val(_)),"group"==a&&(i.removeAttr("id"),i.attr("class",i.attr("class").replace("property-fields-all-devices","property-fields-"+u)),"all-devices"!=u&&i.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker").each(function(t){var r=e(this);r.attr("name",r.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+u+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var t=e(this);t.attr("id",t.attr("id").replace("-all-devices","-"+u))})),"selector"!=a&&"group"!=a||(i.find("div.sel-code-alias").text(_),i.find("input, textarea.property-input").each(function(r){var a=e(this);t.hasValue(a.attr("name"))&&a.attr("name",a.attr("name").replace("tvr_mcth["+s+"]["+l+"]","tvr_mcth["+n+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+n+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+n+"]["+c+"]"))}),i.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(i).each(function(){try{var t=e(this);t.attr("id",t.attr("id").replace(s+"-"+l,n+"-"+c))}catch(r){}})),i},add_section:function(a){var i=t.ucwords(a.siblings(".new-section-input").val()),s=t.new_name_checks(i,"folder");if(!s)return!1;var n=r.dom_replacements("section",e("#strk-selector_section").add(e("#opts-selector_section")).clone(),"selector_section",s.newName,s.newNameHuman);e("#tvr-options").append(n[1]),e("#tvr-menu").append(n[0]).find("li").filter(":last").hide().fadeIn("fast",function(){e("#add-new-section").find("input.new-section-input").val("");var t=e("#section-count-state");r.update_count(t,"add",1,"section")}),t.refresh_sortable(),e("#main-menu-scroll").mCustomScrollbar("scrollTo","bottom"),r.user_action({items:[i],val:r.title(a),icon:[{icon:r.hi.section},{icon:"add-icon tvr-icon"}]}),r.ajax_save_settings()},load_section_selectors:function(t,a){var i=t.sectionM.find('input.selector-tracker[value="0"]');return r.selsToLoad=i.length,r.totalToLoad=r.selsToLoad,r.selsToLoad>0?r.action_in_prog(t.sectionM,"all-sels-loading")?!0:(r.log_action(t.sectionM,"all-sels-loading"),r.com_data_loading(t.sectionM,"sec",a),i.each(function(){t=r.get_meta(e(this),"selector"),r.ajax_load_ui_data(t.selector,t.sectionM,t.selectorT,t.sectionSlug,t.selectorSlug,"selector",3,a)}),!0):!1},toggle_rename_section:function(e){var t=r.get_meta(e,"section");if(!r.action_in_prog(t.sectionM,"rename")&&!r.action_in_prog(t.sectionM,"data-load")&&!r.load_section_selectors(t,js_i18n_main.sec_rename)){r.log_action(t.sectionM,"rename");var t=r.get_meta(e,"section"),a=t.sectionM.find(".edit-section-form"),i=t.sectionM.find(".section-name");a.hasClass("show")?(i.show(),a.removeClass("show")):(i.hide(),a.addClass("show")),r.unlog_action(t.sectionM,"rename")}},action_rename_section:function(a){var i=r.get_meta(a,"section"),s=t.ucwords(i.sectionM.find(".rename-input").val());if(t.convert_to_param(s)==i.sectionSlug){var n=[];n.newName=i.sectionSlug,n.newNameHuman=s}else{var n=t.new_name_checks(s,"folder");if(!n)return!1}var o=i.sectionM.find("input.section-display-name").val(),l=n.newName,c=n.newNameHuman,d=i.sectionSlug,_=i.sectionM.add(i.section);r.dom_replacements("section",_,d,l,c),i=r.get_meta(e("#strk-"+l),"section"),r.toggle_rename_section(i.sectionM),r.selInFocusID.indexOf("opts-"+d)>=0&&r.update_global_vars(r.get_meta(i.section.find("li.in-focus"),"selector"));var u="";o!=c&&(u+=js_i18n_main.previous_name+": "+o+"\n",u+=js_i18n_main.new_name+": "+c),r.user_action({items:["section"],val:r.title(a),M:i,valTT:u,icon:[{icon:r.hi.section},{icon:"edit-icon tvr-icon"}]}),r.ajax_save_settings()},copy_section:function(a){var i=r.get_meta(a,"section");if(!r.action_in_prog(i.sectionM,"copy")&&!r.load_section_selectors(i,js_i18n_main.sec_copy)){r.log_action(i.sectionM,"copy");var s=t.resolve_unique_name(i.sectionH,e("#tvr-menu"),".section-name","Copy"),n=r.dom_replacements("section",r.proper_clone(i.section.add(i.sectionM)),i.sectionSlug,t.convert_to_param(s),s);n.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),n.find("img.ajax-loader").remove(),i.sectionM.after(n[0]),i.section.after(n[1]);var o=e("#section-count-state"),l=i.sectionM.find("span.selector-count-state").attr("rel");r.update_count(o,"add",1,"section",l),r.unlog_action(i.sectionM,"copy"),t.hasValue(r.selInFocusID)&&r.update_visual_controls(e("#"+r.selInFocusID)),r.user_action({items:["section"],val:r.title(a),M:i,valTT:s,icon:a.attr("class")}),r.ajax_save_settings()}},action_in_prog:function(e,r){return!!t.hasValue(e.attr(r+"-in-prog"))},log_action:function(e,t){e.attr(t+"-in-prog",1)},unlog_action:function(e,t){e.removeAttr(t+"-in-prog")},delete_section:function(a){var i=r.get_meta(a,"section");return r.action_in_prog(i.sectionM,"delete")||r.action_in_prog(i.sectionM,"all-sels-loading")?!1:(r.log_action(i.sectionM,"delete"),void i.sectionM.fadeOut("fast",function(){var s=i.sectionM.find("span.selector-count-state").attr("rel");if(r.update_count(e("#section-count-state"),"subtract",1,"section",s),t.hasValue(r.selInFocusID)&&r.is_cur("sec",i.sectionSlug)){r.expanded("quick_section")&&r.close_quick_edit();var n=r.selectorTrackerScan(i.sectionM,"next");if(t.isDomEl(n)||(n=r.selectorTrackerScan(i.sectionM,"prev")),t.isDomEl(n)){var o=r.get_meta(n,"selector");r.tvr_iterate_selectors_v(o.selectorT)}else;}i.section.remove(),i.sectionM.remove(),r.user_action({items:["section"],val:r.title(a),M:i,icon:a.attr("class")}),r.ajax_save_settings()}))},toggle_add_selector:function(e){var t=r.get_meta(e,"section"),a=t.sectionM.find(".add-selector-form");a.hasClass("show")?r.close_add_selector(a):r.reveal_add_selector(a)},reveal_add_selector:function(e){var t=r.get_meta(e,"section");e.addClass("show"),t.sectionM.find(".menu-arrow").hasClass("on")||r.toggle_folder(t.sectionM)},close_add_selector:function(e){e.removeClass("show"),e.find("textarea.selector-css-textarea, input.selector-name-input").val("")},selector_checks_values:function(e,r,a){var i=t.ucwords(e.val());if(""==i)return alert(js_i18n_main.enter_selector_name),!1;if(t.convert_to_param(i)==a){var s=[];s.newName=a,s.newNameHuman=i}else{var s=t.new_name_checks(i,"selector");if(!s)return!1}return r?(s.code=r,s):(alert(js_i18n_main.enter_css),!1)},show_hide_sel_custom:function(e,t){var a=r.analyse_sel_code(e);a.custom_styles?t.addClass("custom-styles"):t.removeClass("custom-styles")},analyse_sel_code:function(e){var t=[];if(e.indexOf("{")>=0){t.custom_styles=!0;var r=e.split("{");t.code=r[0]}else t.custom_styles=!1,t.code=e;return t},add_selector:function(a){if(!r.allowed_action(a,"Add Sel"))return!1;var i=r.get_meta(a,"section"),s=r.selector_checks_values(i.sectionM.find(".add-selector-form .selector-name-input"),i.sectionM.find(".add-selector-form .selector-css-textarea").val(),!1);if(!s)return!1;var n=r.dom_replacements("selector",e("#strk-selector_section-selector_css").add(e("#opts-selector_section-selector_css")).clone(),"selector_section",i.sectionSlug,i.sectionM.find(".name-text").text(),"selector_css",s.newName,s.newNameHuman,s.code);n.find(".view-state-input").val(1),i.sectionM.find(".selector-sub").append(n[0]),i.section.find(".opts-selectors-sub").append(n[1]),r.update_count(i.sectionM.find(".selector-count-state"),"add",1,"selector",""),i=r.get_meta(i.section.find(".selector-tag").last(),"selector"),r.tvr_iterate_selectors_v(i.selectorT),r.maybe_default_to_pg(i.selector),t.refresh_sortable(),r.show_hide_sel_custom(s.code,i.selectorM.find(".selector-name")),r.close_add_selector(i.sectionM.find(".add-selector-form")),r.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),window.TvrSharedVars.intelli&&r.hide_wizard(),r.expanded("quick_selector")&&r.close_quick_edit(),r.user_action({items:["selector"],val:r.title(a),M:i,pathTT:!0,icon:[{icon:r.hi.selector},{icon:"add-icon tvr-icon"}]}),r.ajax_save_settings()},load_selector:function(e,t){return 0!=e.selectorT.val()||r.action_in_prog(e.selectorM,"data-load")?!1:(r.com_data_loading(e.selectorM,"sel",t),r.ajax_load_ui_data(e.selector,e.selectorM,e.selectorT,e.sectionSlug,e.selectorSlug,"selector",1,t),!0)},toggle_modify_selector:function(e){var t=r.get_meta(e,"selector");if(!r.action_in_prog(t.selectorM,"rename")&&!r.action_in_prog(t.selectorM,"data-load")&&!r.load_selector(t,js_i18n_main.load_before_modifying)){r.log_action(t.selectorM,"rename");var a=t.selectorM.find(".edit-selector-form");a.hasClass("show")?(a.removeClass("show"),r.expanded("quick_selector")&&r.close_quick_edit()):a.addClass("show"),r.unlog_action(t.selectorM,"rename")}},action_modify_selector:function(a){var i=r.get_meta(a,"selector"),s=r.selector_checks_values(i.selectorM.find(".selector-name-input"),i.selectorM.find(".selector-css-textarea").val(),i.selectorSlug);if(!s)return!1;var n=i.selectorM.find(".selector-label").val().split("|"),o=n[0],l=n[1],c=s.newName,d=s.newNameHuman,_=i.sectionSlug,u=i.selectorM.add(i.selector);r.dom_replacements("selector",u,_,_,i.sectionH,i.selectorSlug,c,d,s.code),r.is_cur("sel",i.selectorID)&&(r.update_global_vars(r.get_meta(i.section.find("li.in-focus"),"selector")),i.selector.find("pre.ace_editor").each(function(){var t=e(this);r.set_editor_content(t,TvrEditors[t.attr("id")],i)})),r.show_hide_sel_custom(s.code,i.selectorM.find(".selector-name")),window.TvrSharedVars.curSelCSS=t.custom_escape_quotes(s.code),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight("reg",!0),i=r.get_meta(a,"selector");var p="";o!=d&&(p+=js_i18n_main.previous_name+": "+o+"\n",p+=js_i18n_main.new_name+": "+d),l!=s.code&&(p+=p?"\n":"",p+=js_i18n_main.previous_code+": "+l+"\n",p+=js_i18n_main.new_code+": "+s.code),r.user_action({items:["selector"],val:r.title(a),M:i,valTT:p,pathTT:!0,icon:[{icon:r.hi.selector},{icon:"edit-icon tvr-icon"}]}),r.ajax_save_settings(),r.toggle_modify_selector(i.selectorM),r.expanded("quick_selector")&&r.close_quick_edit()},proper_clone:function(t){var a=t.clone();return a.find("div.sp-replacer, div.sp-container").remove(),a.find("input.color.bound").removeClass("bound"),r.colorpicker_bind(a),a.find("pre.custom-css-pre").each(function(){var t=e(this);t.removeClass("ace_editor").html("")}),a},copy_selector:function(a){if(!r.allowed_action(a,"Add Sel"))return!1;var i=r.get_meta(a,"selector");if(!r.action_in_prog(i.selectorM,"copy")&&!r.action_in_prog(i.selectorM,"data-load")&&!r.load_selector(i,js_i18n_main.load_before_copying)){r.log_action(i.selectorM,"copy");var s=t.resolve_unique_name(i.selectorH,i.sectionM,".selector-name","Copy"),n=r.dom_replacements("selector",r.proper_clone(i.selector.add(i.selectorM)),i.sectionSlug,i.sectionSlug,i.sectionH,i.selectorSlug,t.convert_to_param(s),s,i.selectorM.find(".selector-css-textarea").val());n.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),i.selectorM.after(n[0]),i.selector.after(n[1]),r.update_count(i.sectionM.find(".selector-count-state"),"add",1,"selector",""),r.unlog_action(i.selectorM,"copy"),t.hasValue(r.selInFocusID)&&r.update_visual_controls(e("#"+r.selInFocusID)),r.user_action({items:["selector"],val:r.title(a),M:i,pathTT:!0,valTT:s,icon:a.attr("class")}),r.ajax_save_settings()}},delete_selector:function(e){var a=r.get_meta(e,"selector");return r.action_in_prog(a.selectorM,"delete")||r.action_in_prog(a.selectorM,"data-load")?!1:(r.log_action(a.selectorM,"delete"),void a.selectorM.fadeOut("fast",function(){if(a.selector.remove(),r.section_check_values(a.section,!0),r.update_count(a.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),r.section_check_values(a.section,!0),r.is_cur("sel",a.selectorID)){r.expanded("quick_selector")&&r.close_quick_edit();var i=r.selectorTrackerScan(a.sectionM,"next","selector",a.selectorM);if(t.isDomEl(i)||(i=r.selectorTrackerScan(a.sectionM,"prev","selector",a.selectorM)),t.isDomEl(i)){var s=!0,n=r.get_meta(i,"selector");r.tvr_iterate_selectors_v(n.selectorT)}else var s=!1}a.selectorM.remove(),s||r.update_visual_controls(!1),r.user_action({items:["selector"],val:r.title(e),M:a,pathTT:!0,icon:[{icon:r.hi.selector},{icon:e.attr("class")}]}),r.ajax_save_settings()}))},add_property_group:function(a,i){t.startT("add_property_group");var s=r.get_meta(a,"group"),n=r.dom_replacements("group",e("#option-group-template-"+s.groupSlug).clone(),"selector_section",s.sectionSlug,s.sectionM.find(".name-text").text(),"selector_css",s.selectorSlug,s.selectorH,s.selectorM.find(".selector-css-textarea").val(),i).addClass("show");s.group.append(n),t.endT("add_property_group",0)},remove_property_group:function(e,t){var r=e.group.find("div.property-fields-"+t);return r?(r.remove(),!0):!1},update_accordion:function(e,t){var r=t.find("li.accordion-item"),a=e.parent();if(a.hasClass("show-content"))var i=!0;return t.find(".accordion-menu-arrow.on").removeClass("on"),r.slideUp(function(){t.find(".show-content").removeClass("show-content")}),i?!1:(a.find(".accordion-menu-arrow").addClass("on"),e.siblings("li.accordion-item").slideDown(function(){a.addClass("show-content")}),!1)},pg_icon_pressed:function(t){if(!r.allowed_action(t,"Edit Sel"))return!1;var a=r.get_mq_focus(),i=a,s=r.get_pg_focus_obj(),n=window.TvrSharedVars.pgInFocus=t.attr("rel"),o=r.get_pg_focus_obj(),l=r.get_meta(o,"group");e.get(r.ajaxUrl+"&mcth_simple_ajax=1&pg_focus="+n,function(){}),r.get_group(l)||r.add_property_group(l.group,a);var c=l.selector.find(".styling-options"),d=".group-tag",_=l.selector.find(".styling-option-icons"),u=".pg-icon",p=".pg-focus",f=n;r.update_tab(c,d,_,f,u,p),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str"),r.after_tab_switch(l,s,i,o,a),r.refresh_comp_css(),r.toolbar_adjusted()},show_add_mq:function(e){return r.itemAlreadyExpanded?!1:void e.addClass("on").parent().addClass("expanded on")},clear_data_level:function(t){var a,i=t.attr("data-input-level"),s="tab"==i?r.get_meta(e("#"+r.selInFocusID),"selector"):r.get_meta(t,i);if("section"==i||"selector"==i){if("section"==i)var n=s.sectionM,o=s.section;else var n=s.selectorM,o=s.selector;r.action_in_prog(n,"clear")||r.action_in_prog(n,"data-load")||("section"!=i||r.load_section_selectors(s,js_i18n_main.sec_clear))&&("selector"!=i||r.load_selector(s,js_i18n_main.load_before_clearing))||(r.log_action(n,"clear"),r.clear_fields(o.find("div.property-tag"),t,i,s),r.unlog_action(n,"clear"))}else if("tab"==i||"subgroup"==i){if("tab"==i){var l=t.closest("span.mq-tab").attr("rel");a=s.selector.find("div.property-fields-"+l).find("div.property-tag")}else a=r.get_subgroup(s);r.clear_fields(a,t,i,s)}r.section_check_values(s.section,!0,!0,!0,!0)},clear_fields:function(a,i,s,n){a.each(function(){var a=e(this),i=a.prev(".subgroup-tag"),s=a.find("input.property-input, textarea.property-input"),o=a.find("span.important-toggle");if(s.val(""),s.hasClass("color")&&r.clear_spectrum_inputs(r.get_meta(a,"property")),s.hasClass("tvr-editor-hidden")){var l=s.next("pre");l.hasClass("ace_editor")&&r.set_editor_content(l,TvrEditors[l.attr("id")],n)}if(r.post_edit(s),o.hasClass("active")&&r.input_icon_toggle(o,!0),t.isDomEl(i)){var c=i.find(".chained-toggle");c.hasClass("active")&&r.input_icon_toggle(c,!0)}}),r.user_action({items:[s],val:r.title(i),M:n,pathTT:"section"!=s,icon:[{icon:r.h_i_class(s,n)},{icon:i.attr("class")}]}),r.ajax_save_settings()},update_tab:function(t,a,i,s,n,o,l){if(i.find(n).removeClass("active").end().find(n+"-"+s).addClass("active").end().find(o).val(s),!l&&(t.find(a+".show").removeClass("show").end().find(a+"-"+s).addClass("show"),".pg-icon"==n)){var c=t.find(a+"-"+s);c.find(".property-fields").removeClass("show").end().find(".property-fields-"+r.get_mq_focus()).addClass("show")}".adv-tab"==n&&e.get(r.ajaxUrl+"&mcth_simple_ajax=1&adv_wizard_tab="+s,function(){})},mq_tab_pressed:function(a){var i,s=!0,n="",o=r.get_mq_focus(),l=a.attr("rel"),c=e("#responsive-bar").find(".query-tabs"),d=".mq-tab",_=".device-focus";if(t.hasValue(r.selInFocusID)&&(s=!1,n=".property-fields",i=r.get_pg_focus_obj()),r.update_tab(i,n,c,l,d,_,s),e.get(r.ajaxUrl+"&mcth_simple_ajax=1&mq_device_focus="+l,function(){}),t.hasValue(r.selInFocusID)){var u=r.get_meta(r.get_pg_focus_obj(),"group");r.get_group(u)||r.add_property_group(u.group,l),r.tab_check_values(u.selector,l,!1,!0),r.after_tab_switch(u,i,o,i,l)}r.update_iframe_slider(r.mqs[l].min,r.mqs[l].max),r.reset_mob_previews()},after_tab_switch:function(e,a,i,s,n){if(t.startT("after_tab_switch"),"css"!=e){var o=1==TvrPref.allow_scss?"scss":"css",l=r.get_group(e);r.colorpicker_bind(l),"code"==e.groupSlug&&r.bind_editor(l,"custom-css-pre",o,e),r.update_pg_input_widths(e),t.isDomEl(a)&&t.isDomEl(s)&&a.attr("id")+i!=s.attr("id")+n&&r.clean_pg(e,a,i)}if("css"==e){var c=s.data("code-type");c=1==TvrPref.allow_scss&&"css"==c?"scss":c,r.bind_editor(s,"custom-css-pre",c,e),a&&r.unbind_editor(a,e)}t.endT("after_tab_switch",0)},clean_pg:function(e,a,i){t.startT("clean_pg");var s=a&&a.hasClass("group-tag-code");s&&e&&r.check_feathers_after_prop_change(e);var n=r.maybe_remove_group(a,i);n||s&&r.unbind_editor(a.find("div.property-fields-"+i),e),t.endT("clean_pg",0)},js_in_focus:function(){return!(!e("#visual-view").hasClass("show_code_editor")||"js"!=r.get_css_focus())},unbind_editor:function(r,a){t.startT("unbind_editor"),r.find("pre.custom-css-pre").each(function(){var t=e(this),r=t.attr("id");if(TvrEditors[r]&&t.hasClass("ace_editor")){var i=t.prev("textarea"),s="custom-css-pre";"css"!=a&&(s+=" pg-css-styles");var n=TvrEditors[r];n.destroy(),t.remove(),e('<pre id="'+r+'" class="'+s+'"></pre>').insertAfter(i),delete TvrEditors[r]}}),t.endT("unbind_editor",0)},default_to_tab:function(e){"mq"==e?r.mq_tab_pressed(r.stat.res.find(".mq-tab-"+r.get_mq_focus())):"css"==e&&r.css_tab_pressed(r.stat.code.find(".css-tab-"+r.get_css_focus()))},get_mq_focus:function(){var a=e("#responsive-bar").find("input.device-focus").val();return t.hasValue(a)&&t.hasValue(r.mqs[a])||(a="all-devices"),a},get_css_focus:function(){var e=r.stat.code.find("input.css-focus").val();return e||(e="all-browsers"),e},get_dialog_tab_focus:function(e){var t=e.find("input.dialog-focus").val();return t||(t="0"),t},get_dialog_focus:function(){return r.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(t){return e("#responsive-bar").find(".mq-tab-"+t).find(".mq-tab-txt").text()},get_pg_focus_obj:function(){var a=e("#"+r.selInFocusID+"-"+window.TvrSharedVars.pgInFocus);return t.isDomEl(a)?a:!1},get_group:function(e,r){var a=e.group.find("div.property-fields-"+e.tabSlug);return r&&(a=a.find("input.property-input")),t.isDomEl(a)?a:!1},get_pg_fields_obj:function(e,r){var a=e.find("div.property-fields-"+r);return t.isDomEl(a)?a:!1},get_subgroup:function(e,a){var i=r.get_group(e).find("div.subgroup-"+e.subgroupSlug);return a&&(i=i.find("input.property-input")),t.isDomEl(i)?i:!1},maybe_remove_group:function(e,t){if(e){var a=r.get_meta(e,"group");if(!r.pg_check_values(a.group,t,!1))return r.remove_property_group(a,t)}return!1},update_style_signal:function(e,t,r){t?e.addClass("hasValues"):e.removeClass("hasValues")},pg_check_values:function(a,i,s){var n=r.get_meta(a,"group"),o=!1,l=r.get_mq_focus();return n.group.find("div.property-fields-"+i).find("input.property-input, textarea.property-input").each(function(r){return t.isDefined(e(this).val())?(o=!0,!1):void 0}),s&&i==l&&r.update_style_signal(n.selector.find("li.pg-icon-"+n.groupSlug),o),o},tab_check_values:function(t,a,i,s){var n=!1;for(var o in TvrPGs){var l=r.pg_check_values(t.find("li.group-tag-"+o),a,s);if(l&&(n=!0,!s))break}return i&&r.update_style_signal(e("#responsive-bar").find(".mq-tab-"+a),n,"tab"),n},selector_check_disabled:function(r){var a=r.selectorM.find("p.sel-toggles"),i=e("#responsive-bar").find(".query-tabs");for(var s in TvrMQsCombined){var n=i.find("span.mq-tab-"+s).find(".disabled-icon");t.isDomEl(a.find("input.disabled-tracker-"+s))?n.addClass("active").closest(".mq-tab").addClass("item-disabled"):n.removeClass("active").closest(".mq-tab").removeClass("item-disabled")}},selector_check_values:function(e,t,a,i){var s=!1,n=!1,o=r.get_meta(e,"selector");for(var l in TvrMQsCombined)if(n=r.tab_check_values(e,l,a,i),n&&(s=!0,!a&&!i))break;return t&&r.update_style_signal(o.selectorM,s,"selector",o),s},section_check_values:function(t,a,i,s,n){var o=!1,l=!1,c=r.get_meta(t,"section");return t.find("li.selector-tag").each(function(){var t=r.get_meta(e(this),"selector"),a=t.selectorM.find("input.selector-tracker");if(0==a.val()){if(!t.selectorM.hasClass("hasValues"))return!0;l=!0}else l=r.selector_check_values(t.selector,i,s,n);return!l||(o=!0,i||s||n)?void 0:!1}),a&&r.update_style_signal(c.sectionM,o,"section",c),o},css_tab_pressed:function(t){var a=r.get_css_focus(),i=t.attr("rel"),s=i==a?!1:r.stat.code.find("div.css-code-wrap-"+a),n=r.stat.code,o=".css-code-wrap",l=n.find(".css-code-tabs"),c=".css-tab",d=".css-focus";r.update_tab(n,o,l,i,c,d);var _=r.stat.code.find("div.css-code-wrap-"+i);r.after_tab_switch("css",s,a,_,i),e.get(r.ajaxUrl+"&mcth_simple_ajax=1&css_focus="+i),r.toolbar_adjusted()},adv_tab_pressed:function(t){var a=e("#advanced-wizard"),i=".adv-area",s=a.find(".query-tabs"),n=t.attr("rel"),o=".adv-tab",l=".adv-wizard-focus";r.update_tab(a,i,s,n,o,l),t.hasClass("adv-tab-html-inspector")&&r.adjust_wiz_comp_height()},dialog_tab_pressed:function(e){var t=e.closest(".dialog-main"),a=".dialog-tab-field",i=t.find(".dialog-tabs"),s=e.attr("rel"),n=".dialog-tab",o=".dialog-focus";r.update_tab(t,a,i,s,n,o)},combobox_clicked:function(e){e.autocomplete("search","").next(".combo-arrow").addClass("on"),r.combobox_focused(e)},combo_arrow_clicked:function(e){var t=e.prev();if("input"==t.prop("tagName").toLowerCase())var a=t;else var a=t.find("input");return r.wasOpen?(e.removeClass("on"),a.autocomplete("close"),void(r.wasOpen=!1)):(e.addClass("on"),a.focus().autocomplete("search",""),void r.combobox_focused(e))},combobox_focused:function(t){t.hasClass("custom_css_unit")&&e("#css_unit_set").val("")},sug_css_clicked:function(t){t.closest("li").hasClass("in-focus")||(e("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),t.closest("li").addClass("in-focus"))},get_editor_height:function(e){r.aceClick=[],r.aceClick.container=e,r.aceClick.orig_height=e.height()},autoScroll:function(t){var r=e("#advanced-wizard").find(".scrollable-refined"),a=136;if("focus"==t)var i=e("#code-suggestions").find("li").first();else var i=e("#code-suggestion-"+t);var s=i.position().top;(13>s||s>a-13)&&r.animate({scrollTop:s},"500")},fix_ff_mq_bug:function(e,t){return!t||"Firefox"!=r.browser&&"Chrome"!=r.browser?e:e-.3},toggle_interface_feature:function(a){a=a.closest(".uit-par");var i=a.hasClass("on")?0:1,s=a.data("aspect");"draft_mode"==s?(window.TvrSharedVars.cssStub=i?"draft":"active",r.user_action({items:[i?js_i18n_main.draft_enabled:js_i18n_main.draft_disabled],icon:"draft-mode lg-icon"})):"show_code_editor"==s&&i?r.default_to_tab("css"):"fullscreen"==s?t.toggleFullScreen(a):"show_interface"==s&&(window.TvrSharedVars.show_interface=i),i?r.show_interface_feature(a,s):r.hide_interface_feature(a,s),TvrPref[s]=i,"highlighting"==s?r.toggle_highlighting():e.get(r.ajaxUrl+"&mcth_simple_ajax=1&"+s+"="+i,function(){"draft_mode"==s&&r.ajax_save_settings()})},show_interface_feature:function(t,a){e("#visual-view").addClass(a),t||"show_interface"==a&&(t=e("#m-logo")),t.addClass("on"),"show_rulers"==a&&e("#common-devices-preview").removeClass("hidden"),r.toolbar_adjusted()},hide_interface_feature:function(t,a){e("#visual-view").removeClass(a),t.removeClass("on"),"show_rulers"==a&&e("#common-devices-preview").addClass("hidden"),r.neutral_interface()},neutral_interface:function(){r.hide_wizard(),r.toolbar_adjusted()},determine_slider_val:function(e,t){var a=0;return a=e&&!t?e:t?t:r.frameWidth},update_iframe_slider:function(t,a){var i=r.determine_slider_val(t,a),s=0,n=r.fullWidth;r.slider_moved(i,a,r.get_mq_focus()),r.update_ruler_highlighter(t,a),t?e("#iframe-min-width").text("min: "+t+"px"):e("#iframe-min-width").text(""),a?e("#iframe-max-width").text("max: "+a+"px"):e("#iframe-max-width").text("");var o=r.stat.slider;o.slider({min:s,max:n,value:i,start:function(e,t){window.TvrSharedVars.highlightEnabled&&(r.hide_highlighting(),window.TvrSharedVars.tmpHideHighlighting=!0)},slide:function(e,t){r.slider_moved(t.value,a,r.get_mq_focus()),r.reset_mob_previews()},change:function(t,a){if(e("#visual-view").hasClass("show-wizard")){var i="intelli";window.frames.viframe.TvrExportVars.get_computed_styles({},"obj",!0),r.refresh_wizard_comp_css()}else var i="reg";window.TvrSharedVars.tmpHideHighlighting&&(window.TvrSharedVars.tmpHideHighlighting=!1,r.show_highlighting()),r.screen_width_adjusted(i)}}),r.iframe_slider_set=!0},slider_moved:function(t,a,i){r.animate_screen?e("#v-frontend").width(r.animate_screen).stop(!0).animate({width:r.fix_ff_mq_bug(t,a)},"slow",function(){r.animate_screen=!1}):e("#v-frontend").width(r.fix_ff_mq_bug(t,a)),e("#iframe-pixel-width").text(t+"px"),r.check_slider_within_range(t,i)},toggle_screen_preview:function(e){e=e.closest("li.mt-screen-preview"),e.hasClass("clicked")?r.unset_screen_preview(e,"clicked"):r.set_screen_preview(e,"clicked")},set_screen_preview:function(a,i){var s=e("#common-devices-preview").find("li.clicked");if("hover"==i&&t.isDomEl(s))return!1;s.removeClass(i),r.animate_screen=e("#v-frontend").width();var n=parseInt(a.attr("rel"));r.stat.slider.slider("value",TvrMobPreview[n][1]),r.slider_moved(TvrMobPreview[n][1],!0,r.get_mq_focus()),e("#height-screen").removeClass("hidden").css("top",TvrMobPreview[n][2]+19+"px"),a.addClass(i)},unset_screen_preview:function(a,i,s){if("hover"==i&&t.isDomEl(e("#common-devices-preview").find("li.clicked"))||"clicked"==i)return"clicked"==i&&a.removeClass(i),!1;r.animate_screen=e("#v-frontend").width();var n=r.get_mq_focus(),o=r.determine_slider_val(r.mqs[n].min,r.mqs[n].max);r.stat.slider.slider("value",o),r.slider_moved(o,r.mqs[n].max,n),e("#height-screen").addClass("hidden"),a.removeClass(i)},reset_mob_previews:function(){e("#common-devices-preview").find("li").removeClass("clicked"),e("#height-screen").addClass("hidden")},update_ruler_highlighter:function(t,a){var i=e("#rHighlight-wrap"),s=e("#rHighlight");if(t||a){i.add(s).removeClass("hidden");var n=e("#min-neg"),o=e("#max-neg");t?n.css({width:t}).removeClass("hidden"):n.addClass("hidden"),a?o.css({left:a,width:r.fullWidth-a}).removeClass("hidden"):o.addClass("hidden"),t=t?t:0,a=a?a:r.fullWidth;var l=t?t+19:19,c=a?a-t:r.fullWidth-19-t;s.css({left:l,width:c})}else i.add(s).addClass("hidden")},check_slider_within_range:function(t,a){var i=!1,s=r.mqs[a].min?r.mqs[a].min:!1,n=r.mqs[a].max?r.mqs[a].max:!1;s&&s>t&&(i=!0),n&&t>n&&(i=!0);var o=e("#current-screen-width"),l=e("#v-frontend-wrap").find("div.corner").add(o),c="Styles added to the current tab will not have an effect at this screen width ("+t+"px)";i?(l.addClass("warn"),o.attr("title",c)):(l.removeClass("warn"),o.attr("title","Screen width: "+t+"px"))},screen_width_adjusted:function(e){r.iframe_functions_loaded()&&(window.frames.viframe.TvrExportVars.update_highlight(e),window.frames.viframe.TvrExportVars.get_computed_styles(window.TvrSharedVars.curSelCSS,"str")),r.refresh_comp_css()},map_formatted_comp:function(e,t,r,a,i,s,n,o,l){if(l)var c=window.TvrSharedVars.intelliCompProps;else var c=window.TvrSharedVars.compProps;if("straight"==r&&("var"==t?c[e[a]]=s:(0==i&&(c[e[a]]=[]),c[e[a]][i]=[],c[e[a]][i].val=s,c[e[a]][i].htmlString=n)),"array"==r){var d=-1,_=e[a];for(var u in _)"var"==t?c[_[u]]=o[++d]:(0==i&&(c[_[u]]=[]),c[_[u]][i]=[],c[_[u]][i].val=o[++d],c[_[u]][i].htmlString=n)}l?window.TvrSharedVars.intelliCompProps=c:window.TvrSharedVars.compProps=c},format_exceptions:function(e,a,i,s,n,o){if("var"==n)var l=i;else var l=i[s].val,c=i[s].htmlString;if(!t.hasValue(l))return!1;if("font-family"==a||"list-style-type"==a||"border-top-left-radius"==a||"border-top-right-radius"==a||"border-bottom-right-radius"==a||"border-bottom-left-radius"==a)r.map_formatted_comp(e,n,"straight",a,s,l,c,[],o);else if("text-shadow"==a||"box-shadow"==a){
var d=l.match(/(-?\d+px)|(rgba?\(.+\))/g);if(d){if("MSIE"!=r.browser){var _=d[1],u=d[2],p=t.replace_decimals(d[0],1),f=d[3];if("text-shadow"==a)d=[_,u,f,p];else if("box-shadow"==a){var v=d[4],m=d[5];d=[_,u,f,v,p,m]}}}else d=[0,0,0,"none"],"box-shadow"==a&&(d[3]=0,d[4]="none",d[5]="");r.map_formatted_comp(e,n,"array",a,s,l,c,d,o)}else if("list-style-image"==a)r.map_formatted_comp(e,n,"straight",a,s,t.basename(l),c,[],o);else if("background-img-full"==a){var g=[];g[0]=t.extract_str("bg-image",l);var h=t.extract_str("gradient",l);if(h){var w=/gradient\((.+)\)/.exec(h);if(w){var b=w[1],x=/rgba?\([^)]+\)/g,T=t.get_all_matches(b,x,0),y=t.replace_all_matches(b,T,"xxx"),S=y.split(", "),C="";l.indexOf("webkit")>=0&&(C="webkit-");var k="top to bottom",j=!1,V=0,M=0;if(S[0].indexOf("deg")>-1&&(k=e.keys[C+"gradient-angle"][S[0]],j=!0,M=1),g[1]=k,g[2]=T[V],j&&S.length>3||!j&&S.length>2){var O=S[++M].split(" ");g[3]=T[++V],g[4]=O[1],g[5]=T[++V]}else g[3]="none",g[4]="0",g[5]=T[++V]}else h.indexOf("svg")>-1&&(g[1]="IE9 can't report",g[2]="IE9 can't report",g[3]="IE9 can't report",g[4]="IE9 can't report",g[5]="IE9 can't report")}else g[1]="none",g[2]="none",g[3]="none",g[4]="0",g[5]="none";r.map_formatted_comp(e,n,"array",a,s,l,c,g,o)}else if("background-position"==a){var I=l.split(", "),q=I[0].split(" "),E=e.keys["background-position-x"][q[0]],D=e.keys["background-position-y"][q[1]],z=E?E:q[0],F=D?D:q[1],R=z+" "+F;r.map_formatted_comp(e,n,"straight",a,s,R,c,[],o)}else if("background-repeat"==a||"background-attachment"==a||"background-size"==a||"background-clip"==a){var I=l.split(", ");r.map_formatted_comp(e,n,"straight",a,s,I[0],c,[],o)}},filter_css_exceptions:function(e){if(e)var t=window.TvrSharedVars.intelliCompProps;else var t=window.TvrSharedVars.compProps;var a=TvrPropExceptions,i=0;for(var s in t){++i;var n=t[s];if(n===Object(n))for(var o in n)r.format_exceptions(a,s,n,o,"obj",e);else r.format_exceptions(a,s,n,"","var",e)}return i},refresh_comp_css:function(){if(!r.iframe_functions_loaded())return!1;var a=r.filter_css_exceptions(!1),i=e("#"+r.selInFocusID);if(!t.isDomEl(i))return!1;if(1>a){var s=js_i18n_main.null_selector;return i.find(".option-value").text(s),void i.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text("")}var n="div.field-wrap:not(.tvr-editor-area)";if(""!=window.TvrSharedVars.pgInFocus)var o=i.find("li.group-tag-"+window.TvrSharedVars.pgInFocus).find(n);else var o=i.find(n);o.each(function(a){var i=e(this);if(!i.hasClass("group-label")&&!i.hasClass("sub-label")){var s=i.find(".option-label"),n=i.find(".option-value"),o=s.text(),l=i.find("span.comp-style"),c=i.find(".property-input"),d=l.attr("class").split(" "),_=d[1].replace("cprop-",""),u=window.TvrSharedVars.compProps[_],p=0;if(t.isDefined(u))if(u===Object(u)){i.addClass("mixed-cp"),l.text("[mix]");var f=js_i18n_main.value_varies,v="";for(var m in u)if(t.isDefined(u[m].val)){var g=u[m].htmlString.replace("&#60;","<").replace("&#62;",">");v+='<tr class="mixed-val" rel="'+p+'"><td>'+ ++p+"</td><td title='"+g+"'>"+r.colored_box(u[m].val,!0)+"</td></tr>"}i.find("table.comp-mixed-table").find("tbody").html(v)}else{var f=u;i.removeClass("mixed-cp");var h=u;if(u=r.truncate_displayed_comp_css(c,u),i.hasClass("is-picker")){var w="background-color:transparent";"transparent"!=h&&"none"!=h&&(w="background-color:"+h,f=t.maybe_to_hex(h)),l.html('<span style="'+w+'"></span>')}else l.html(u)}else{var f=js_i18n_main.style_not_applicable;"Content"==o&&(f=js_i18n_main.not_knowable),l.text("")}n.text(f)}})},truncate_displayed_comp_css:function(e,t){var r=e.width(),a=t.length,i=r/6;return a>i&&(t=t.substring(0,i)+"..."),t},colored_box:function(e){if(!e||e.indexOf("rgb")<0||e.indexOf(":")>-1)return e;var r=t.maybe_to_hex(e),a='<span class="colored-box" style="background-color:'+e+'"></span>';return a+='<span class="colored-val">'+r+"</span>"},ei:-1,logArr:[],log:function(t){if(e.isPlainObject(t[0]))for(var a in t)t[a]["long"]=t[a]["long"]?t[a]["long"]:"<p></p>",t[a].type=t[a].type?t[a].type:"error",r.logArr[++r.ei]=t[a];else t["long"]=t["long"]?t["long"]:"<p></p>",t.type=t.type?t.type:"error",r.logArr[++r.ei]=t},extract_status:function(t){var r=-1,a=[];return t.find("li.tvr-message").each(function(){var t=e(this),i=t.attr("class"),s="notice",n=t.find(".short").text(),o=t.find(".long").html();i.indexOf("tvr-info")>-1?s="info":i.indexOf("tvr-warning")>-1?s="warning":i.indexOf("tvr-error")>-1&&(s="error"),a[++r]={"short":n,"long":o,type:s}}),a},is_boring_status:function(t){var r=!1;if(e.isArray(t))for(var a in t)t[a]["short"]==js_i18n_main.settings_saved&&1==t.length&&(r=!0);return r},update_tmp_prog:function(t,r){var a=e("#m-logo"),i=e("#status-short"),s=e("#dialogs").find(".tvr-dialog"),n=s.find(".dialog-status").find("span"),o=s.find(".dialog-icon"),l=a.add(i).add(n).add(o),c=i.add(n);r?(l.removeClass("active"),c.text("")):(c.removeClass(),l.addClass("active"),c.text(t))},update_prog_indicator:function(e,a,i,s){if("plus"==e){if(!r.something_wrong){r.update_tmp_prog(a+"...");var n=t.in_array(a,window.TvrSharedVars.progStatus);n&&(window.TvrSharedVars.progStatus.splice(n,1),clearTimeout(r.progTimer[a])),window.TvrSharedVars.progStatus.push(a);var o=2e4;r.progTimer[a]=setTimeout(r.prog_error,o,a,o)}}else a&&r.log(a),clearTimeout(r.progTimer[i]),r.unset_prog(i),window.TvrSharedVars.progStatus.length<=0&&(s||r.something_wrong||(r.update_tmp_prog("",!0),r.update_full_logs()))},unset_prog:function(e){var r=t.in_array(e,window.TvrSharedVars.progStatus);r&&window.TvrSharedVars.progStatus.splice(r,1)},ua_detected:function(){r.something_wrong=!1},js_error_deets:function(){var e="";if(window.TvrSharedVars.JSerrors.length>0){e+="<ol>";for(var r in window.TvrSharedVars.JSerrors){var a=window.TvrSharedVars.JSerrors[r];e+="<li>";for(var i in a){var s=a[i];if("URL"==i)s='<a target="_blank" href="'+s+'">'+t.root_rel(s)+"</a>",s+=" (line "+a.line+")";else if("line"==i)continue;e+="<b>"+t.ucwords(i)+":</b> "+s+"<br />"}e+="</li>"}e+="</ol>",window.TvrSharedVars.JSerrors=[]}return e},front_js_error:function(){r.log({"short":window.TvrSharedVars.JSerrors[0].error,"long":"<p>"+js_i18n_main.js_error_site+":</p>"+r.js_error_deets(),type:"warning"})},prog_error:function(e,t,a){if(r.something_wrong)return r.unset_prog(e),!1;if(r.something_wrong=!0,r.update_tmp_prog("",!0),a){var i=window.TvrSharedVars.JSerrors[0].error;i+=" (line "+window.TvrSharedVars.JSerrors[0].line+")",r.log({"short":i,"long":"<p>"+js_i18n_main.js_error_site+":</p>"+r.js_error_deets(),type:"warning"})}else{var s=r.js_error_deets(),n=s?js_i18n_main.something_wrong_discovered:js_i18n_main.something_wrong_no_errors,o=tvrsprintf(js_i18n_main.something_wrong_intro,e,t/1e3);r.log({"short":js_i18n_main.something_wrong,"long":"<p>"+o+" "+n+"</p>"+s+'<div class="heading">'+js_i18n_main.something_wrong_tips_heading+'</div><ol><li><a target="_blank" href="https://codex.wordpress.org/Using_Your_Browser_to_Diagnose_JavaScript_Errors">'+js_i18n_main.something_wrong_console_article+"</a> ("+js_i18n_main.something_wrong_reliable+")</li><li>"+js_i18n_main.something_wrong_disable+"</li><li>"+js_i18n_main.something_wrong_clueless+"</li><li>"+js_i18n_main.something_wrong_configure+"</li><li>"+js_i18n_main.something_wrong_other+"</li></ol><p>"+js_i18n_main.something_wrong_priority+"</p>",type:"warning"})}r.update_full_logs(),r.unset_prog(e)},log_js_error:function(){},update_short_status:function(){var r=e("#dialogs").find(".tvr-dialog"),a=r.find(".dialog-status").find("span"),i=e("#status-short");i.add(a).removeClass();var s=["error","warning","info","notice"];for(var n in s){var o=e("#full-logs").find("ul.logs").find("li.tvr-"+s[n]).last();if(t.isDomEl(o)){var l=s[n];break}}if(t.isDomEl(o)){var c=o.find(".short").text()+"...";i.add(a).addClass("tvr-"+l).text(c),i.addClass("tvr-message"),a.addClass("link close-dialog")}},update_full_logs:function(a){a&&r.log(a);var i=e("#full-logs").find(".logs"),s=[];for(var n in r.logArr)if("dev-notice"!=r.logArr[n].type){var o=e("#log-item-template").clone().removeAttr("id");o.attr("class",o.attr("class").replace("tvr-error","tvr-"+r.logArr[n].type)).find(".short").text(r.logArr[n]["short"]).end().find(".long").html(r.logArr[n]["long"]),s[n]=o}var l=e("#data-msg-pending");(!parseInt(l.attr("rel"))||t.hasValue(r.logArr[n])&&r.logArr[n]["short"]==js_i18n_main.something_wrong)&&i.html(s),l.attr("rel",0),r.logReset(),r.update_short_status()},logReset:function(){r.logArr=[],t.ei=-1},clear_messages:function(){e("#status-short").add(e("#dialogs").find(".tvr-dialog").find(".dialog-status").find("span")).removeClass().html(""),e("#full-logs").find(".logs").html("")},default_to_sel:function(){var a=e("#last-viewed-selector").val(),i=e("#last-edited-selector").val();if(t.hasValue(a)&&t.isDomEl(e("#"+a)))var s=e("#"+a);else if(t.hasValue(i)&&t.isDomEl(e("#"+i)))var s=e("#"+i);else var s=e("#tvr-menu").find("li.selector-tag:eq(0)");return s&&t.hasValue(s.attr("id"))?(r.startSel=!0,void r.tvr_iterate_selectors_v(s)):!1},adjust_comp_span:function(e,t){"after"==t?e.val()?(e.closest(".property-tag").addClass("manual-val"),e.siblings("span.comp-style").addClass("hidden")):(e.closest(".property-tag").removeClass("manual-val"),e.siblings("span.comp-style").removeClass("hidden")):"hover"==t&&e.siblings("span.comp-style").addClass("hidden")},chain_is_on:function(e){return!!t.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(t,a){var i=r.get_subgroup(a,"inputs"),s=t.val();i.not(t).each(function(t){var a=e(this);a.hasClass("color")?s?r.update_spectrum(s,a,{},!1):r.clear_spectrum_inputs(r.get_meta(a,"property")):a.val(s),r.post_edit(a)}),t.focus()},maybe_sync_fields:function(e){if(e.hasClass("autofillable")){var t=r.get_meta(e,"property");r.chain_is_on(t)&&r.sync_fields(e,t)}},sync_important:function(t,a){if(r.chain_is_on(t)){var i=r.get_subgroup(t).not(t.property);i.each(function(t){var i=e(this).find("span.important-toggle");("add"==a&&!i.hasClass("active")||"remove"==a&&i.hasClass("active"))&&r.input_icon_toggle(i,!0)})}},bind_input_events:function(e){e.on("input.tvr propertychange.tvr",function(t){var a=e.attr("class");if(!a)return!1;if(a.indexOf("property-input")>=0)r.inputWaitingObj=e,r.maybe_sync_fields(e),r.post_edit(e);else if(a.indexOf("sp-input")>=0){var i=r.inputWaitingObj=e.closest("span.input-wrap").find("input.color");if(a.indexOf("sp-input-opacity")<0)r.update_spectrum(e.val(),i,e,!0);else{var s=e.val();if(isNaN(s)||0>s||s>1)return;var n=i.spectrum("get").toRgb();n.a=s,i.spectrum("set",n),r.update_spectrum_inputs(tinycolor(n),i,e,!0)}}a.indexOf("img_display")<0&&r.set_typing_timer()}),e.on("blur",function(){r.unbind_input_events(e)})},unbind_input_events:function(e){e.off("input.tvr propertychange.tvr")},update_input_width:function(t){var r=e("<span>").text(t.val()).appendTo(t.parent()),a=r.innerWidth();r.remove(),t.width(a+14)},update_pg_input_widths:function(a){if(t.isDomEl(a.group)){var i=r.get_group(a,"inputs");i&&r.get_group(a,"inputs").each(function(t){e(this).val()&&r.update_input_width(e(this))})}},done_typing:function(){r.ajax_save_settings("",r.inputWaitingObj)},get_folders:function(){var t=[];return e("#tvr-menu").find(".section-tag").each(function(a){var i=r.get_meta(e(this),"section");t[a]=i.sectionH}),t},show_wizard:function(){if(window.TvrSharedVars.intelli=!0,e("#visual-view").addClass("show-wizard"),r.show_adv_wizard(),TvrCombo.cur_folders=r.get_folders(),t.hasValue(r.selInFocusID)){var a=r.get_meta(e("#"+r.selInFocusID),"selector");e("#wizard_folder").val(a.sectionH).removeClass("text-label")}r.update_selector_wizard()},hide_wizard:function(){e("#visual-view").removeClass("show-wizard"),r.hide_adv_wizard(),window.TvrSharedVars.intelli=!1,r.return_normal_highlighting(),e("#wizard-name").val(""),r.toolbar_adjusted()},show_adv_wizard:function(){e("#visual-view").addClass("show-advanced");var t=e("#advanced-wizard"),a=t.height()-200;t.find(".wizard-panes").height(a),r.screen_width_adjusted("intelli")},hide_adv_wizard:function(){e("#visual-view").removeClass("show-advanced"),r.screen_width_adjusted("intelli")},switch_html_element:function(e){var t=e.attr("class"),a=window.TvrSharedVars.TvrSugCSS;if(t.indexOf("tvr-parent")>=0)var i=a.Intelli.parent;else if(t.indexOf("tvr-child")>=0)var i=a.Intelli.child;else if(t.indexOf("tvr-prev-sibling")>=0)var i=a.Intelli.prev;else if(t.indexOf("tvr-next-sibling")>=0)var i=a.Intelli.next;r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.build_selector_suggestions(i)},update_selector_wizard:function(){var a=e("#advanced-wizard"),i=window.TvrSharedVars.TvrSugCSS,s="",n=0,o=1,l=1,c=0;for(var d in i){if("Intelli"==d)break;if(++n,n==i.Intelli.ogCount)var _=js_i18n_main.highest_specificity;else var _="";s+='<li class="selector-category">'+d+_+"</li>";for(var u in i[d])if("each"!=u){if(window.TvrSharedVars.intelli_css==u)var p='in-focus"';else var p="";var f="",v='title="'+t.escapeHTML(i[d][u])+'"';s+='<li id="code-suggestion-'+l+'" class="code-suggestion '+p+'"><textarea class="sug-sel" '+f+">"+u+'</textarea><span class="tvr-icon info-icon" '+v+"></span></li>",l+=o,++c}}e("#code-suggestions").html(e(s).get().reverse()),a.find("div.refine-target-controls span").addClass("disabled"),a.find("div.refine-target-controls span").each(function(t){var r=e(this),a=r.attr("class");a.indexOf("tvr-parent")>=0&&i.Intelli.parent?r.removeClass("disabled"):a.indexOf("tvr-child")>=0&&i.Intelli.child?r.removeClass("disabled"):a.indexOf("tvr-prev-sibling")>=0&&i.Intelli.prev?r.removeClass("disabled"):a.indexOf("tvr-next-sibling")>=0&&i.Intelli.next&&r.removeClass("disabled")}),a.find("div.refine-target-html span").html(i.Intelli.htmlString),r.adjust_wiz_comp_height(),r.refresh_wizard_comp_css()},adjust_wiz_comp_height:function(){var t=e("#advanced-wizard").find(".wizard-panes").height()-e("#refine-target").height()-36;e("#html-computed-css").add(e("#html-computed-css").find(".scrollable-area")).css("max-height",t)},refresh_wizard_comp_css:function(){r.filter_css_exceptions("intelli");var a=window.TvrSharedVars.intelliCompProps=r.un_flatten_css(window.TvrSharedVars.intelliCompProps),i=e("#html-computed-css");i.find("li.property-item").remove();for(var s in a){var n="",o=1;for(var l in a[s]){if(t.isOdd(o))var c="row-odd";else var c="row-even";var d=l.replace(/-/g," ");n+='<li class="property-item accordion-item '+c+'">',n+='<span class="comp-prop-label">'+d+":</span> ",n+='<span class="comp-prop-value">'+a[s][l]+"</span>",n+="</li>",++o}n+='<li class="property-item accordion-item bottom-gap"></li>',e("#comp-"+s).append(n)}},un_flatten_css:function(e){var t=[];for(var r in window.TvrSharedVars.cssProps){t[r]=[];for(var a in window.TvrSharedVars.cssProps[r]){var i=window.TvrSharedVars.cssProps[r][a];"background-img-full"==i||"extracted-gradient"==i||"google-font"==i||"text-shadow"==i||"box-shadow"==i||"background-image"==i&&"gradient"==r||(t[r][i]=e[i])}}return t},wizard_new_selector:function(a){var i=e("#wizard_folder").val();if(!t.hasValue(i)||i==js_i18n_main.wizard_folder)return alert(js_i18n_main.wizard_folder_alert),!1;var s=t.convert_to_param(i),n=e("#wizard-name").val(),o=e("#code-suggestions").find("li.in-focus textarea").val();if(!t.isDomEl(e("#strk-"+s))){var l=e("#add-new-section").find(".new-section-input");l.val(i),r.add_section(l.siblings(".new-section-add"))}var c=r.get_meta(e("#strk-"+s),"section");c.sectionM.find(".add-selector-form").find(".selector-name-input").val(n),c.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(o),r.add_selector(c.sectionM.find("span.add-selector"))},load_visual_view:function(a){if(t.startT("load visual view"),TvrPref.returned_ajax_msg&&!TvrPref.returned_ajax_msg_seen)for(var i in TvrPref.returned_ajax_msg)r.log(TvrPref.returned_ajax_msg[parseInt(i)]);if(window.history.pushState&&parseInt(e("#clean-ui-url").attr("rel"))){var s=e("#ui-url").attr("rel");window.history.pushState(s,null,s)}var n=r.stat.body,o=n.height();if(n.addClass("tvr-visual"),r.frameWidth=r.allDevicesWidth,r.default_to_tab("mq"),r.default_to_sel(),r.toolbarHeight=r.stat.top.height(),r.frameHeight=o-r.toolbarHeight,r.resSliderWidth=e("#v-mq-controls").width(),r.tabsWidth=r.fullWidth-r.resSliderWidth+40,r.toggle_enabled_buttons(),r.placeholderFrame&&(r.update_prog_indicator("plus",js_i18n_main.load_wp),r.stat.iframe.contents().find("body").css("height",r.frameHeight+"px"),window.frames.viframe.location=r.stat.iframe.attr("rel"),r.placeholderFrame=!1),r.stat.front.css("height",r.frameHeight),t.startT("apply rulers"),r.stat.front.ruler(),t.endT("apply rulers"),r.init_editor_deps(),TvrPref.show_code_editor&&r.default_to_tab("css"),!r.iframe_slider_set){var l=r.get_mq_focus();r.update_iframe_slider(r.mqs[l].min,r.mqs[l].max)}t.endT("load visual view")},toolbar_adjusted:function(){r.toolbarHeight=e("#v-top-controls").height(),window.TvrSharedVars.show_interface||(r.toolbarHeight=0),r.frameHeight=e("#wpwrap").height()-r.toolbarHeight,e("#v-frontend-wrap").css("height",r.frameHeight)},toggle_enabled_buttons:function(){r.totalSels<1&&(r.reset_global_vars(),e("#starter-message").removeClass("hidden"),e("#quick-nav").addClass("hidden"),r.expanded("quick_section")&&r.close_quick_edit(),e("#current-selector").text("")),r.totalSels>0&&(e("#starter-message").addClass("hidden"),e("#quick-nav").removeClass("hidden"))},remember_page_viewed:function(){var a=e("#previewurl").val(),i=(r.siteUrl,e("#viframe").contents().find("#iframe-url").attr("content")),s=decodeURIComponent(i),n=t.extract_url_path(s);t.hasValue(s)&&s!=a&&!r.placeholderFrame&&(e.get(r.ajaxUrl+"&mcth_simple_ajax=1&mt_preview_url="+i+"&mt_preview_path="+n,function(){e("#previewStatus").text("iframe-success")}),e("#previewurl").val(s),e("#back-to-frontend").attr("href",s),t.in_array(n,TvrCombo.custom_paths)||TvrCombo.custom_paths.unshift(n))},update_visual_controls:function(a){if(!t.isDomEl(a))return e("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var i=r.get_meta(a,"selector"),s=r.selectorTrackerScan(i.sectionM,"prev","selector",i.selectorM),n=r.selectorTrackerScan(i.sectionM,"next","selector",i.selectorM);s?e("#vb-focus-prev").removeClass("disabled"):e("#vb-focus-prev").addClass("disabled"),n?e("#vb-focus-next").removeClass("disabled"):e("#vb-focus-next").addClass("disabled"),r.get_meta(a,"selector")},selectorTrackerScan:function(e,a,i,s){if("prev"==a){if("selector"==i){var n=s.prev("li.strk-sel");return t.hasValue(n.attr("id"))?n:r.selectorTrackerScan(e,a)}var o=e.prev("li.strk-sec");if(t.hasValue(o.attr("id"))){var l=o.find(".strk-sel").last();return t.hasValue(l.attr("id"))?l:r.selectorTrackerScan(o,a)}return!1}if("next"==a){if("selector"==i){var c=s.next("li.strk-sel");return t.hasValue(c.attr("id"))?c:r.selectorTrackerScan(e,a)}var d=e.next("li.strk-sec");if(t.hasValue(d.attr("id"))){var _=d.find(".strk-sel").first();return t.hasValue(_.attr("id"))?_:r.selectorTrackerScan(d,a)}return!1}},toggle_highlighting:function(){window.TvrSharedVars.highlightEnabled?r.hide_highlighting():r.show_highlighting()},show_highlighting:function(){window.TvrSharedVars.highlightEnabled=!0,e("#toggle-highlighting").addClass("on"),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.showOverlays()},hide_highlighting:function(){window.TvrSharedVars.highlightEnabled=!1,e("#toggle-highlighting").removeClass("on"),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.hideOverlays()},return_normal_highlighting:function(){if(window.TvrSharedVars.highlightEnabled&&window.TvrSharedVars.tmpHighlighting&&(window.TvrSharedVars.tmpHighlighting=!1,r.toggle_highlighting()),r.iframe_functions_loaded()){var e="reg";if(window.parent.TvrSharedVars.intelli)var e="intelli";window.frames.viframe.TvrExportVars.update_highlight(e)}},tvr_iterate_selectors_v:function(t){r.selInFocusID&&!r.prev&&(r.prev={pg:r.get_pg_focus_obj(),tabKey:r.get_mq_focus()});var a=r.get_meta(t,"selector");r.load_selector(a,js_i18n_main.load_before_iterating)||(r.selInFocusID&&r.prev&&(r.clean_pg(!1,r.prev.pg,r.prev.tabKey),r.prev=!1),e("#tvr-options").find("li.in-focus").removeClass("in-focus"),a.selector.addClass("in-focus"),r.update_global_vars(a),r.iframe_functions_loaded()&&window.frames.viframe.TvrExportVars.update_highlight("reg"),r.update_visual_controls(t),r.refresh_comp_css(),r.maybe_default_to_pg(a.selector),r.selector_check_values(a.selector,!1,!0,!0),r.selector_check_disabled(a),r.toolbar_adjusted(),r.startSel=!1)},iframe_functions_loaded:function(){return window.frames.viframe&&window.frames.viframe.TvrExportVars&&window.frames.viframe.TvrExportVars.update_highlight&&window.frames.viframe.TvrExportVars.get_computed_styles&&window.frames.viframe.TvrExportVars.iframe_window_fully_loaded?(window.TvrSharedVars.awaitingIFrame=!1,!0):(window.TvrSharedVars.awaitingIFrame=!0,!1)},maybe_default_to_pg:function(t){var a=r.get_meta(t,"selector"),i=r.startSel?e("#last-pg-focus").attr("rel"):window.TvrSharedVars.pgInFocus,s=i?".pg-icon-"+i:".pg-icon-font";r.pg_icon_pressed(a.selector.find(s))},quick_nav:function(t){if(t.hasClass("disabled"))return!1;var a=r.get_meta(e("#"+r.selInFocusID),"selector");if("vb-focus-prev"==t.attr("id"))var i="prev";else var i="next";r.tvr_iterate_selectors_v(r.selectorTrackerScan(a.sectionM,i,"selector",a.selectorM))}};r.init(),window.TvrSharedVars.startT=t.startT,window.TvrSharedVars.endT=t.endT,window.TvrSharedVars.showT=t.showT,window.TvrSharedVars.print_r=t.print_r,window.TvrSharedVars.extract_str=t.extract_str,window.TvrSharedVars.custom_to_non_escaped=t.custom_to_non_escaped,window.TvrSharedVars.jquery_escape_quotes=t.jquery_escape_quotes,window.TvrSharedVars.hasValue=t.hasValue,window.TvrSharedVars.in_array=t.in_array,window.TvrSharedVars.sane_decimal=t.sane_decimal,window.TvrSharedVars.isDomEl=t.isDomEl,window.TvrSharedVars.log=r.log,window.TvrSharedVars.prog_error=r.prog_error,window.TvrSharedVars.js_in_focus=r.js_in_focus,window.TvrSharedVars.analyse_sel_code=r.analyse_sel_code,window.TvrSharedVars.update_prog_indicator=r.update_prog_indicator,window.TvrSharedVars.show_wizard=r.show_wizard,window.TvrSharedVars.hide_wizard=r.hide_wizard,window.TvrSharedVars.update_selector_wizard=r.update_selector_wizard,window.TvrSharedVars.toggle_highlighting=r.toggle_highlighting,window.TvrSharedVars.insert_google_font=r.insert_google_font,window.TvrSharedVars.ajax_save_settings=r.ajax_save_settings,window.TvrSharedVars.remember_page_viewed=r.remember_page_viewed,window.TvrSharedVars.refresh_comp_css=r.refresh_comp_css,window.TvrSharedVars.close_all_expanded=r.close_all_expanded,window.TvrSharedVars.show_dialog=r.show_dialog,window.TvrSharedVars.update_packs_obj=r.update_packs_obj,window.TvrSharedVars.update_full_logs=r.update_full_logs,window.TvrSharedVars.clear_messages=r.clear_messages,window.TvrSharedVars.show_interface_feature=r.show_interface_feature,window.TvrSharedVars.picker_method=r.picker_method,window.TvrSharedVars.ua_detected=r.ua_detected});
//# sourceMappingURL=maps/tvr-microthemer.js.map
